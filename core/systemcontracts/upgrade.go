package systemcontracts

import (
	"encoding/hex"
	"fmt"
	"math/big"

	"github.com/ethereum/go-ethereum/common"
	"github.com/ethereum/go-ethereum/core/state"
	"github.com/ethereum/go-ethereum/log"
	"github.com/ethereum/go-ethereum/params"
)

type UpgradeConfig struct {
	BeforeUpgrade upgradeHook
	AfterUpgrade  upgradeHook
	ContractAddr  common.Address
	CommitUrl     string
	Code          string
}

type Upgrade struct {
	UpgradeName string
	Configs     []*UpgradeConfig
}

type upgradeHook func(blockNumber *big.Int, contractAddr common.Address, statedb *state.StateDB) error

const (
	mainNet    = "Mainnet"
	chapelNet  = "Chapel"
	rialtoNet  = "Rialto"
	defaultNet = "Default"
	//GST测试网
	testNet = "Testnet"
)

var (
	GenesisHash common.Hash
	//upgrade config
	ramanujanUpgrade = make(map[string]*Upgrade)

	nielsUpgrade = make(map[string]*Upgrade)

	mirrorUpgrade = make(map[string]*Upgrade)

	brunoUpgrade = make(map[string]*Upgrade)

	ByzantiumUpgrade = make(map[string]*Upgrade)

	//系统合约升级
	rewardUpgrade = make(map[string]*Upgrade)
)

func init() {

	ByzantiumUpgrade[mainNet] = &Upgrade{
		UpgradeName: "byzan",
		Configs: []*UpgradeConfig{
			{
				ContractAddr: common.HexToAddress(ValidatorContract),
				CommitUrl:    "https://github.com/binance-chain/bsc-genesis-contract/commit/ce622fef469d84ee418fa6181f3ac962412a5f4f",
				Code:         "6080604052600436106102515760003560e01c80638624988211610139578063c6cea403116100b6578063e1c7392a1161007a578063e1c7392a14610666578063eb57e2021461067b578063ecd35fbb1461069b578063ed763913146106b0578063f65974f1146106c5578063f9a2bbc7146106e557610251565b8063c6cea403146105e7578063d0083d3614610607578063d9e570ab14610627578063e086c7b11461063c578063e0e77ea11461065157610251565b8063ad3c9da6116100fd578063ad3c9da61461055b578063b358a14d1461057b578063b3adcdcb14610590578063b7ab4db5146105b0578063c3c2559f146105d257610251565b806386249882146104cd578063899347a6146104e2578063a5422d5c14610502578063a78abc1614610524578063aa90eb421461054657610251565b80634b4feb88116101d2578063684d650811610196578063684d6508146104145780636969a25c146104295780637f2737501461045f5780638050aabb1461047457806381014ae3146104895780638452230e146104a957610251565b80634b4feb88146103a0578063565c56b3146103b55780635e0ca3b4146103d55780635ec737ba146103ea57806367970591146103ff57610251565b806335409f7f1161021957806335409f7f146102fa57806337b0cf361461031a57806343756e5c1461034957806345ef7bfe1461035e578063493279b11461037e57610251565b80631a8dea36146102565780631b6f72a61461026b5780631ff1806914610296578063258718a7146102b8578063276868c5146102da575b600080fd5b610269610264366004613abc565b6106fa565b005b34801561027757600080fd5b50610280610975565b60405161028d9190613d08565b60405180910390f35b3480156102a257600080fd5b506102ab61098d565b60405161028d91906141e9565b3480156102c457600080fd5b506102cd610993565b60405161028d9190613e58565b3480156102e657600080fd5b506102696102f5366004613b76565b61099c565b34801561030657600080fd5b50610269610315366004613aa1565b610a66565b34801561032657600080fd5b5061033a610335366004613b5e565b610e85565b60405161028d93929190613d7f565b34801561035557600080fd5b50610280610ebe565b34801561036a57600080fd5b50610269610379366004613b30565b610ec4565b34801561038a57600080fd5b50610393610f3f565b60405161028d91906141da565b3480156103ac57600080fd5b50610280610f44565b3480156103c157600080fd5b506102ab6103d0366004613aa1565b610f4a565b3480156103e157600080fd5b50610280610f9c565b3480156103f657600080fd5b50610280610fb4565b34801561040b57600080fd5b50610269610fcc565b34801561042057600080fd5b50610280611073565b34801561043557600080fd5b50610449610444366004613b5e565b61108b565b60405161028d9a99989796959493929190613d1c565b34801561046b57600080fd5b5061028061110d565b34801561048057600080fd5b50610280611125565b34801561049557600080fd5b506102696104a4366004613b42565b61113d565b3480156104b557600080fd5b506104be6111e3565b60405161028d93929190613df8565b3480156104d957600080fd5b506102ab6116b5565b3480156104ee57600080fd5b506102696104fd366004613ae6565b6116bb565b34801561050e57600080fd5b50610517611bc3565b60405161028d9190613e45565b34801561053057600080fd5b50610539611bdf565b60405161028d9190613e3a565b34801561055257600080fd5b50610280611be8565b34801561056757600080fd5b506102ab610576366004613aa1565b611c00565b34801561058757600080fd5b50610280611c12565b34801561059c57600080fd5b506102696105ab366004613aa1565b611c2a565b3480156105bc57600080fd5b506105c5611e64565b60405161028d9190613dab565b3480156105de57600080fd5b50610280611f86565b3480156105f357600080fd5b50610269610602366004613b30565b611f9e565b34801561061357600080fd5b506102ab610622366004613aa1565b612072565b34801561063357600080fd5b506102806120d1565b34801561064857600080fd5b506102ab6120e9565b34801561065d57600080fd5b506102806120ee565b34801561067257600080fd5b50610269612106565b34801561068757600080fd5b50610269610696366004613aa1565b612eba565b3480156106a757600080fd5b5061028061310c565b3480156106bc57600080fd5b50610280613124565b3480156106d157600080fd5b506102ab6106e0366004613aa1565b61313c565b3480156106f157600080fd5b5061028061314e565b3341146107225760405162461bcd60e51b815260040161071990614144565b60405180910390fd5b60005460ff166107445760405162461bcd60e51b815260040161071990613e90565b600034116107645760405162461bcd60e51b815260040161071990613f79565b6001600160a01b0382166000908152600460205260409020543490801561092d57600060018083038154811061079657fe5b600091825260209091206008909102018054909150600160a01b900460ff161561080057846001600160a01b03167ff177e5d6c5764d79c32883ed824111d9b13f5668cf6ab1cc12dd36791dd955b4846040516107f391906141e9565b60405180910390a2610927565b60028101546001600160401b03161561086a57600281015460009061084a9060649061083e908790600160401b9004850b850b63ffffffff61315416565b9063ffffffff61319716565b905061085c848263ffffffff6131d916565b9350610868828261321b565b505b60035461087d908463ffffffff61326716565b6003556001810154610895908463ffffffff61326716565b600182015560048101546108af908463ffffffff61326716565b60048201556005810180546001600160401b0380821687011667ffffffffffffffff1990911617905560068101805460010190556040516001600160a01b038616907f93a090ecc682c002995fad3c85b30c5651d7fd29b0be5da9d784a3302aedc0559061091e9086906141e9565b60405180910390a25b5061096f565b836001600160a01b03167ff177e5d6c5764d79c32883ed824111d9b13f5668cf6ab1cc12dd36791dd955b48360405161096691906141e9565b60405180910390a25b50505050565b73f588a47781041644ae6d9a657a6eee712f7936d681565b60035481565b60255460000b81565b60005460ff166109be5760405162461bcd60e51b815260040161071990613e90565b33613000146109df5760405162461bcd60e51b815260040161071990613ec7565b6001600160a01b03821660009081526004602052604090205480610a155760405162461bcd60e51b815260040161071990613fed565b6000600180830381548110610a2657fe5b906000526020600020906008020190508215610a4b57610a46818661328c565b610a55565b610a558186613317565b610a5f84846133d4565b5050505050565b3361100114610a875760405162461bcd60e51b815260040161071990614191565b6001600160a01b03811660009081526004602052604090205480610aab5750610e82565b600181039050600060018281548110610ac057fe5b60009182526020909120600160089092020181015490549091506000190180610b0f57600060018481548110610af257fe5b906000526020600020906008020160010181905550505050610e82565b506000805b601f811015610b4a57600581601f8110610b2a57fe5b0154600160e01b900460ff1615610b42576001909101905b600101610b14565b5080610b5857505050610e82565b600060018481548110610b6757fe5b9060005260206000209060080201600101819055506001808481548110610b8a57fe5b6000918252602080832060089092029091018054931515600160a01b0260ff60a01b19909416939093179092556001600160a01b03861681526024909152604090205492508215610d5757600080610be0613810565b9250905081610c1b576000600560018703601f8110610bfb57fe5b018054911515600160e01b0260ff60e01b19909216919091179055610d3b565b610c23613a16565b60018281548110610c3057fe5b60009182526020909120600890910201546001600160a01b03168152600160408201819052805483908110610c6157fe5b6000918252602091829020600260089092020101546001600160401b0316908201528060056000198801601f8110610c9557fe5b82519101805460208401516040909401511515600160e01b0260ff60e01b196001600160401b03909516600160a01b02600160a01b600160e01b03196001600160a01b039095166001600160a01b0319909316929092179390931617929092161790556001805487916024916000919086908110610d0f57fe5b600091825260208083206008909202909101546001600160a01b03168352820192909252604001902055505b50506001600160a01b0384166000908152602460205260408120555b60255460405163ec1dc14360e01b81526101009091046001600160a01b03169063ec1dc14390610d8b908790600401613d08565b600060405180830381600087803b158015610da557600080fd5b505af1158015610db9573d6000803e3d6000fd5b505050506000818381610dc857fe5b04905060008115610e7c5760015460005b81811015610e7957602554600090810b810b9084900b12610df957610e79565b60018181548110610e0657fe5b6000918252602090912060089091020154600160a01b900460ff16610e71578360018281548110610e3357fe5b9060005260206000209060080201600101540160018281548110610e5357fe5b90600052602060002090600802016001018190555082806001019350505b600101610dd9565b50505b50505050505b50565b600581601f8110610e9257fe5b01546001600160a01b0381169150600160a01b81046001600160401b031690600160e01b900460ff1683565b61100181565b60005460ff16610ee65760405162461bcd60e51b815260040161071990613e90565b3361300014610f075760405162461bcd60e51b815260040161071990613ec7565b60405182906001600160a01b0382169083156108fc029084906000818181858888f1935050505015801561096f573d6000803e3d6000fd5b606081565b61300081565b6001600160a01b03811660009081526004602052604081205480610f72576000915050610f97565b600180820381548110610f8157fe5b9060005260206000209060080201600101549150505b919050565b7374ca05e2b40fd15c1819583ea63d87c91a1747c681565b73bda7f006fe37a791acb4c0a543581e470934498a81565b60005460ff16610fee5760405162461bcd60e51b815260040161071990613e90565b336130001461100f5760405162461bcd60e51b815260040161071990613ec7565b602660009054906101000a90046001600160a01b03166001600160a01b031663fc4333cd6040518163ffffffff1660e01b8152600401600060405180830381600087803b15801561105f57600080fd5b505af115801561096f573d6000803e3d6000fd5b73d4f607aef8cb84a2bfab05f185d3941d55f73bfc81565b6001818154811061109857fe5b6000918252602082206008919091020180546001820154600283015460038401546004850154600586015460068701546007909701546001600160a01b038088169a50600160a01b90970460ff169895976001600160401b0380871698600160401b90970490970b969495939490921692168a565b732719a48598c7bb082a1b485f5e9582b9315ec39781565b7359d38a9aab6ca9dd2b43fbef45fc29ee8d1c90c381565b60005460ff1661115f5760405162461bcd60e51b815260040161071990613e90565b33613000146111805760405162461bcd60e51b815260040161071990613ec7565b601f8160000b11156111a45760405162461bcd60e51b815260040161071990613fa8565b60038160000b12156111c85760405162461bcd60e51b8152600401610719906140e7565b6025805460009290920b60ff1660ff19909216919091179055565b6001546060908190819060008080805b848110156112a3576000602460006001848154811061120e57fe5b600091825260208083206008909202909101546001600160a01b0316835282019290925260400190205411801561124d5750602554600090810b900b84105b1561125d5760019093019261129b565b6001818154811061126a57fe5b6000918252602090912060089091020154600160a01b900460ff166112945760019092019161129b565b6001909101905b6001016111f3565b506060836040519080825280602002602001820160405280156112e057816020015b6112cd613a36565b8152602001906001900390816112c55790505b50905060608360405190808252806020026020018201604052801561131f57816020015b61130c613a36565b8152602001906001900390816113045790505b50905060608360405190808252806020026020018201604052801561135e57816020015b61134b613a36565b8152602001906001900390816113435790505b50600096508695508594509050835b6001548110156116a4576000602460006001848154811061138a57fe5b600091825260208083206008909202909101546001600160a01b031683528201929092526040019020541180156113c95750602554600090810b900b87105b156114b057600181815481106113db57fe5b60009182526020808320604080516101408101825260089490940290910180546001600160a01b038082168652600160a01b90910460ff1615159385019390935260018101549184019190915260028101546001600160401b038082166060860152600160401b909104850b850b90940b6080840152600381015460a0840152600481015460c0840152600581015490931660e08301526006830154610100830152600790920154909116610120820152845185908990811061149a57fe5b602090810291909101015260019096019561169c565b600181815481106114bd57fe5b6000918252602090912060089091020154600160a01b900460ff166115be57600181815481106114e957fe5b60009182526020808320604080516101408101825260089490940290910180546001600160a01b038082168652600160a01b90910460ff1615159385019390935260018101549184019190915260028101546001600160401b038082166060860152600160401b909104850b850b90940b6080840152600381015460a0840152600481015460c0840152600581015490931660e0830152600683015461010083015260079092015490911661012082015283518490889081106115a857fe5b602090810291909101015260019095019461169c565b600181815481106115cb57fe5b60009182526020808320604080516101408101825260089490940290910180546001600160a01b038082168652600160a01b90910460ff1615159385019390935260018101549184019190915260028101546001600160401b038082166060860152600160401b909104850b850b90940b6080840152600381015460a0840152600481015460c0840152600581015490931660e08301526006830154610100830152600790920154909116610120820152825183908790811061168a57fe5b60209081029190910101526001909401935b60010161136d565b509198509650945050505050909192565b60025481565b60005460ff166116dd5760405162461bcd60e51b815260040161071990613e90565b33613000146116fe5760405162461bcd60e51b815260040161071990613ec7565b6001600160a01b0383166000908152600460205260409020548061198d57611724613a36565b6001600160a01b0380861680835260006020808501828152878516610120870190815289840b840b60808801908152600180548082018255818752895160089091026000805160206142be8339815191528101805496511515600160a01b0260ff60a01b19938c166001600160a01b03199889161793909316929092179091556040808b015160008051602061431e83398151915283015560608b015160008051602061429e8339815191528301805495518a0b60ff16600160401b0260ff60401b196001600160401b0393841667ffffffffffffffff19988916171617905560a08c015160008051602061433e83398151915284015560c08c015160008051602061427e83398151915284015560e08c01516000805160206142fe83398151915284018054919092169516949094179093556101008a01516000805160206142de833981519152820155925160008051602061425e83398151915290930180549390981692909316919091179095555492825260049052918220555b602554600090810b900b81101561198657600581601f81106118bf57fe5b0154600160e01b900460ff1661197e576118d7613a16565b6001600160a01b03871681526001604082015280600583601f81106118f857fe5b8251910180546020808501516040958601516001600160a01b03199093166001600160a01b0395861617600160a01b600160e01b031916600160a01b6001600160401b03909216919091021760ff60e01b1916600160e01b9215159290920291909117909155908916600090815260249091522060019290920190915550611bbe915050565b6001016118a1565b505061096f565b600060018083038154811061199e57fe5b600091825260209091206008909102018054909150600160a01b900460ff166119d95760405162461bcd60e51b815260040161071990614117565b805460ff60a01b19168155600281018054600086810b60ff16600160401b0260ff60401b19909216919091179091556007820180546001600160a01b0386166001600160a01b03199091161790555b602554600090810b900b811015611a9a57600581601f8110611a4657fe5b0154600160e01b900460ff16611a9257611a5e613a16565b6001600160a01b03871681526001604082015260028301546001600160401b0316602082015280600583601f81106118f857fe5b600101611a28565b50611aa3613912565b9150600582601f8110611ab257fe5b015460028201546001600160401b03600160a01b909204821691161115610a5f5760246000600584601f8110611ae457fe5b01546001600160a01b031681526020810191909152604001600090812055611b0a613a16565b6001600160a01b03861681526001604082015260028201546001600160401b0316602082015280600584601f8110611b3e57fe5b8251910180546020808501516040958601511515600160e01b0260ff60e01b196001600160401b03909216600160a01b02600160a01b600160e01b03196001600160a01b039788166001600160a01b0319909616959095179490941693909317169190911790915590881660009081526024909152206001840190555050505b505050565b6040518060800160405280604781526020016142176047913981565b60005460ff1681565b731197ce55f1199c4b5abab079ebba7715b7d4ad3f81565b60046020526000908152604090205481565b7396fa4c7de0dc1f89ad70b71773f3d56be0b91b7781565b60005460ff16611c4c5760405162461bcd60e51b815260040161071990613e90565b3361300014611c6d5760405162461bcd60e51b815260040161071990613ec7565b6001600160a01b03811660009081526004602052604090205480611ca35760405162461bcd60e51b815260040161071990613f50565b6000600180830381548110611cb457fe5b600091825260208083206008909202909101805460ff60a01b1916600160a01b1781556001600160a01b03861683526024909152604090912054925090508115611bbe57600080611d03613810565b909250905080611d255760405162461bcd60e51b815260040161071990614065565b6001600160a01b038516600090815260246020526040812055611d46613a16565b60018381548110611d5357fe5b60009182526020909120600890910201546001600160a01b03168152600160408201819052805484908110611d8457fe5b6000918252602091829020600260089092020101546001600160401b0316908201528060056000198701601f8110611db857fe5b82519101805460208401516040909401511515600160e01b0260ff60e01b196001600160401b03909516600160a01b02600160a01b600160e01b03196001600160a01b039095166001600160a01b0319909316929092179390931617929092161790556001805486916024916000919087908110611e3257fe5b600091825260208083206008909202909101546001600160a01b03168352820192909252604001902055505050505050565b6060601f6000805b82811015611ea157600581601f8110611e8157fe5b0154600160e01b900460ff1615611e99576001909101905b600101611e6c565b50602554600090810b900b8110611ebe5750602554600090810b900b5b606081604051908082528060200260200182016040528015611eea578160200160208202803683370190505b50600092509050815b83811015611f7e57600581601f8110611f0857fe5b0154600160e01b900460ff1615611f6157600581601f8110611f2657fe5b015482516001600160a01b0390911690839085908110611f4257fe5b6001600160a01b03909216602092830291909101909101526001909201915b602554600090810b900b8310611f7657611f7e565b600101611ef3565b509250505090565b73e10f99bbd766b496343504f46d09c48c7616c9f681565b60005460ff16611fc05760405162461bcd60e51b815260040161071990613e90565b3361300014611fe15760405162461bcd60e51b815260040161071990613ec7565b6001600160a01b03821660009081526004602052604090205480612005575061206e565b600060018083038154811061201657fe5b90600052602060002090600802019050600081600101541161203957505061206e565b828160010154111561206457600181015461205a908463ffffffff6131d916565b600182015561096f565b6000600182015550505b5050565b6001600160a01b038116600090815260046020526040812054806120a85760405162461bcd60e51b815260040161071990613fed565b6001808203815481106120b757fe5b906000526020600020906008020160030154915050919050565b736c67c4b4f082343516372b096899fb48dd4dab7981565b601f81565b735b1711c6b6e1fee92ea478230cff05b9d6363e1681565b60005460ff16156121295760405162461bcd60e51b8152600401610719906140b0565b612131613a36565b612139613a16565b731197ce55f1199c4b5abab079ebba7715b7d4ad3f808352600a608084019081527309d70836d8daf81a1d9ea14a7fddf97c1f872f34610120850190815291835260016040808501829052815480830183556000928352865160089091026000805160206142be8339815191528101805460208a01511515600160a01b0260ff60a01b196001600160a01b039586166001600160a01b03199384161716179091559288015160008051602061431e833981519152820155606088015160008051602061429e833981519152820180549651860b60ff16600160401b0260ff60401b196001600160401b0393841667ffffffffffffffff19998a16171617905560a089015160008051602061433e83398151915283015560c089015160008051602061427e83398151915283015560e08901516000805160206142fe83398151915283018054919092169616959095179094556101008701516000805160206142de833981519152850155935160008051602061425e83398151915290930180549390941692169190911790915581906005908251910180546020808501516040958601511515600160e01b0260ff60e01b196001600160401b03928316600160a01b908102600160a01b600160e01b03196001600160a01b03998a166001600160a01b0319988916171617919091169190911790945573bda7f006fe37a791acb4c0a543581e470934498a808952600a60808a019081527344931bd462c806876c7339ea0809d1ab7f0397e26101208b0190815291895260018989018190528054808201825560008281528c5160089092026000805160206142be83398151915281018054988f01511515909a0260ff60a01b19938c16988a16989098179290921696909617909755978a015160008051602061431e83398151915287015560608a015160008051602061429e83398151915287018054925190950b60ff16600160401b0260ff60401b1991851667ffffffffffffffff1993841617919091161790935560a089015160008051602061433e83398151915286015560c089015160008051602061427e83398151915286015560e08901516000805160206142fe833981519152860180549190931693169290921790556101008701516000805160206142de8339815191528401555160008051602061425e833981519152909201805492909316911617905581906005908251910180546020808501516040958601511515600160e01b0260ff60e01b196001600160401b03928316600160a01b908102600160a01b600160e01b03196001600160a01b03998a166001600160a01b0319988916171617919091169190911790945573f588a47781041644ae6d9a657a6eee712f7936d6808952600a60808a0190815273e10f99bbd766b496343504f46d09c48c7616c9f66101208b0190815291895260018989018190528054808201825560009182528b5160089091026000805160206142be83398151915281018054978e0151151590990260ff60a01b19928b169789169790971791909116959095179096559689015160008051602061431e833981519152840155606089015160008051602061429e83398151915284018054985190960b60ff16600160401b0260ff60401b1991841667ffffffffffffffff19998a1617919091161790945560a088015160008051602061433e83398151915283015560c088015160008051602061427e83398151915283015560e08801516000805160206142fe83398151915283018054919092169616959095179094556101008601516000805160206142de833981519152850155905160008051602061425e833981519152909301805493909216921691909117905580600560028251910180546020808501516040958601511515600160e01b0260ff60e01b196001600160401b03928316600160a01b908102600160a01b600160e01b03196001600160a01b03998a166001600160a01b03199889161716179190911691909117909455732719a48598c7bb082a1b485f5e9582b9315ec397808952600a60808a019081527359d38a9aab6ca9dd2b43fbef45fc29ee8d1c90c36101208b0190815291895260018989018190528054808201825560009182528b5160089091026000805160206142be83398151915281018054978e0151151590990260ff60a01b19928b169789169790971791909116959095179096559689015160008051602061431e833981519152840155606089015160008051602061429e83398151915284018054985190960b60ff16600160401b0260ff60401b1991841667ffffffffffffffff19998a1617919091161790945560a088015160008051602061433e83398151915283015560c088015160008051602061427e83398151915283015560e08801516000805160206142fe83398151915283018054919092169616959095179094556101008601516000805160206142de833981519152850155905160008051602061425e833981519152909301805493909216921691909117905580600560038251910180546020808501516040958601511515600160e01b0260ff60e01b196001600160401b03928316600160a01b908102600160a01b600160e01b03196001600160a01b03998a166001600160a01b03199889161716179190911691909117909455736c67c4b4f082343516372b096899fb48dd4dab79808952600a60808a01908152735b1711c6b6e1fee92ea478230cff05b9d6363e166101208b0190815291895260018989018190528054808201825560009182528b5160089091026000805160206142be83398151915281018054978e0151151590990260ff60a01b19928b169789169790971791909116959095179096559689015160008051602061431e833981519152840155606089015160008051602061429e83398151915284018054985190960b60ff16600160401b0260ff60401b1991841667ffffffffffffffff19998a1617919091161790945560a088015160008051602061433e83398151915283015560c088015160008051602061427e83398151915283015560e08801516000805160206142fe83398151915283018054919092169616959095179094556101008601516000805160206142de833981519152850155905160008051602061425e833981519152909301805493909216921691909117905580600560048251910180546020808501516040958601511515600160e01b0260ff60e01b196001600160401b03928316600160a01b908102600160a01b600160e01b03196001600160a01b03998a166001600160a01b0319988916171617919091169190911790945573d4f607aef8cb84a2bfab05f185d3941d55f73bfc808952600a60808a019081527396fa4c7de0dc1f89ad70b71773f3d56be0b91b776101208b0190815291895260018989018190528054808201825560009182528b5160089091026000805160206142be83398151915281018054978e0151151590990260ff60a01b19928b169789169790971791909116959095179096559689015160008051602061431e833981519152840155606089015160008051602061429e83398151915284018054985190960b60ff16600160401b0260ff60401b1991841667ffffffffffffffff19998a1617919091161790945560a088015160008051602061433e83398151915283015560c088015160008051602061427e83398151915283015560e08801516000805160206142fe83398151915283018054919092169616959095179094556101008601516000805160206142de833981519152850155905160008051602061425e8339815191529093018054939092169216919091179055806005808251910180546020808501516040909501511515600160e01b0260ff60e01b196001600160401b03909616600160a01b02600160a01b600160e01b03196001600160a01b039096166001600160a01b03199485161795909516949094179490941692909217905560017f73e9fdf75239878aa649f84d97b4308a8bc8a4260403244df536ced50ebd8dba81905560027ff353b988539cd508679f521881d2923499bc370e1923312af2b7e3f8a495f0cc81905560037ffc3a84953b97a8a79655ca94ef28b0e38679e241be700d09f43a7ac1db97426081905560047f8345f6351c35950aea7f54ca447f49745d31157c08aacfc36d1eef0e629493c581905560057f9e193c26d359995395827688011245ba061c53b716a62d12ad74e8588ccf214781905560067f900c907371ee88214580db443fb2cc88859af049c9a4db1f255e004e41ead02081905560249097527fa403fbbb83cb1523372765a8a0a640104d5f797be44fee59e34736ee5b11fd6a8590557ffd9a0e45ca5d710dcd94508cb6551e884bd0cc80b5402a6eae6af1908ae64a41939093557f8cb21e9c04029b4295604ca8928d3e4eabd72df8d7e846133ab3273eea511712919091557f6b27305625b71ea82589e6fa95bcf066ee89287098483b743e093cc0f5217279557f641fde418b888a4553e6c1118bdfe029d71074d1f5eaef70814518b301aa46795573d4f607aef8cb84a2bfab05f185d3941d55f73bfc60009081527f780a2eee44125e3874f9918b16a22bff594c9f77ca803992a5289b61cc53d75e8490556025805462300000610100600160a81b031960ff19928316909717969096169590951790556026805490931661100117909255815490921690911790555050565b3361100114612edb5760405162461bcd60e51b815260040161071990614191565b6001600160a01b03811660009081526004602052604090205480612eff5750610e82565b600181039050600060018281548110612f1457fe5b9060005260206000209060080201600101549050600060018381548110612f3757fe5b600091825260209091206001600890920201810191909155546000190180612f6157505050610e82565b506000805b601f811015612f9c57600581601f8110612f7c57fe5b0154600160e01b900460ff1615612f94576001909101905b600101612f66565b5080612faa57505050610e82565b6000818381612fb557fe5b04905060008115610e7c5760005b8581101561306357602554600090810b810b9083900b12612fe357613063565b60018181548110612ff057fe5b6000918252602090912060089091020154600160a01b900460ff1661305b57826001828154811061301d57fe5b906000526020600020906008020160010154016001828154811061303d57fe5b90600052602060002090600802016001018190555081806001019250505b600101612fc3565b50600180549086015b81811015610e7957602554600090810b810b9084900b1261308c57610e79565b6001818154811061309957fe5b6000918252602090912060089091020154600160a01b900460ff166131045783600182815481106130c657fe5b90600052602060002090600802016001015401600182815481106130e657fe5b90600052602060002090600802016001018190555082806001019350505b60010161306c565b7344931bd462c806876c7339ea0809d1ab7f0397e281565b7309d70836d8daf81a1d9ea14a7fddf97c1f872f3481565b60246020526000908152604090205481565b61100081565b60008261316357506000613191565b8282028284828161317057fe5b041461318e5760405162461bcd60e51b815260040161071990614024565b90505b92915050565b600061318e83836040518060400160405280601a81526020017f536166654d6174683a206469766973696f6e206279207a65726f0000000000008152506139b3565b600061318e83836040518060400160405280601e81526020017f536166654d6174683a207375627472616374696f6e206f766572666c6f7700008152506139ea565b60028201546001600160401b0316613239576000600383015561206e565b60028201546132589082906001600160401b031663ffffffff61319716565b60038301805490910190555050565b60008282018381101561318e5760405162461bcd60e51b815260040161071990613f19565b6002820180546001600160401b0380821684011667ffffffffffffffff1990911617905581546001600160a01b03166000908152602460205260409020548015611bbe5781600560018303601f81106132e157fe5b0180546001600160401b03600160a01b808304821690940116909202600160a01b600160e01b0319909216919091179055505050565b60028201546001600160401b03808316911610156133475760405162461bcd60e51b815260040161071990613e66565b6002820180546001600160401b038082168490031667ffffffffffffffff1990911617905581546001600160a01b03166000908152602460205260409020548015611bbe5781600560018303601f811061339d57fe5b0180546001600160401b03600160a01b80830482169490940316909202600160a01b600160e01b0319909216919091179055505050565b6001600160a01b0382166000908152600460205260409020548061340a5760405162461bcd60e51b815260040161071990613fed565b600060018083038154811061341b57fe5b906000526020600020906008020190508215613676576001600160a01b0384166000908152602460205260409020541561345657505061206e565b60005b602554600090810b900b81101561355157600581601f811061347757fe5b0154600160e01b900460ff166135495761348f613a16565b6001600160a01b03861681526001604082015260028301546001600160401b0316602082015280600583601f81106134c357fe5b8251910180546020808501516040958601516001600160a01b03199093166001600160a01b0395861617600160a01b600160e01b031916600160a01b6001600160401b03909216919091021760ff60e01b1916600160e01b921515929092029190911790915590881660009081526024909152206001929092019091555061206e915050565b600101613459565b5061355a613912565b9150600582601f811061356957fe5b015460028201546001600160401b03600160a01b9092048216911611156136715760246000600584601f811061359b57fe5b01546001600160a01b0316815260208101919091526040016000908120556135c1613a16565b6001600160a01b03851681526001604082015260028201546001600160401b0316602082015280600584601f81106135f557fe5b8251910180546020808501516040958601516001600160a01b03199093166001600160a01b0395861617600160a01b600160e01b031916600160a01b6001600160401b03909216919091021760ff60e01b1916600160e01b92151592909202919091179091559087166000908152602490915220600184019055505b61096f565b6001600160a01b03841660009081526024602052604090205461369a57505061206e565b6001600160a01b03841660009081526024602052604081205492506136bd613810565b945090508380156136fe5750600181815481106136d657fe5b600091825260209091206002600890920201810154908301546001600160401b039182169116105b15610a5f576001600160a01b038516600090815260246020526040812055613724613a16565b6001828154811061373157fe5b60009182526020909120600890910201546001600160a01b0316815260016040820181905280548390811061376257fe5b6000918252602091829020600260089092020101546001600160401b0316908201528060056000198601601f811061379657fe5b82519101805460208401516040909401511515600160e01b0260ff60e01b196001600160401b03909516600160a01b02600160a01b600160e01b03196001600160a01b039095166001600160a01b0319909316929092179390931617929092161790556001805485916024916000919086908110611e3257fe5b600080808080805b600154811015613906576001818154811061382f57fe5b60009182526020909120600260089092020101546001600160401b031683118015906138935750602460006001838154811061386757fe5b600091825260208083206008909202909101546001600160a01b03168352820192909252604001902054155b80156138c45750600181815481106138a757fe5b6000918252602090912060089091020154600160a01b900460ff16155b156138fe57600181815481106138d657fe5b60009182526020909120600260089092020101549093506001600160401b0316915060019050825b600101613818565b50919350909150509091565b6005546000908190600160a01b90046001600160401b031660015b601f8110156139ab57600581601f811061394357fe5b0154600160a01b90046001600160401b0316821180156139785750600581601f811061396b57fe5b0154600160e01b900460ff165b156139a357600581601f811061398a57fe5b0154909250600160a01b90046001600160401b03169050815b60010161392d565b509091505090565b600081836139d45760405162461bcd60e51b81526004016107199190613e45565b5060008385816139e057fe5b0495945050505050565b60008184841115613a0e5760405162461bcd60e51b81526004016107199190613e45565b505050900390565b604080516060810182526000808252602082018190529181019190915290565b6040805161014081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e08101829052610100810182905261012081019190915290565b80356001600160a01b038116811461319157600080fd5b600060208284031215613ab2578081fd5b61318e8383613a8a565b60008060408385031215613ace578081fd5b613ad88484613a8a565b946020939093013593505050565b600080600060608486031215613afa578081fd5b8335613b05816141f2565b92506020840135613b1581614207565b91506040840135613b25816141f2565b809150509250925092565b60008060408385031215613ace578182fd5b600060208284031215613b53578081fd5b813561318e81614207565b600060208284031215613b6f578081fd5b5035919050565b600080600060608486031215613b8a578283fd5b83356001600160401b0381168114613ba0578384fd5b9250613baf8560208601613a8a565b915060408401358015158114613b25578182fd5b6001600160a01b03169052565b6000815180845260208085019450808401835b83811015613c98578151613bf8888251613bc3565b83810151613c08858a0182613ca3565b5060408181015190890152606080820151613c25828b0182613cfb565b5050608080820151613c39828b0182613cf4565b505060a0818101519089015260c0808201519089015260e080820151613c61828b0182613cfb565b5050610100818101519089015261012080820151613c81828b0182613bc3565b505050610140969096019590820190600101613be3565b509495945050505050565b15159052565b60008151808452815b81811015613cce57602081850181015186830182015201613cb2565b81811115613cdf5782602083870101525b50601f01601f19169290920160200192915050565b60000b9052565b6001600160401b03169052565b6001600160a01b0391909116815260200190565b6001600160a01b039a8b16815298151560208a015260408901979097526001600160401b03958616606089015260009490940b608088015260a087019290925260c086015290911660e08401526101008301529091166101208201526101400190565b6001600160a01b039390931683526001600160401b039190911660208301521515604082015260600190565b6020808252825182820181905260009190848201906040850190845b81811015613dec5783516001600160a01b031683529284019291840191600101613dc7565b50909695505050505050565b600060608252613e0b6060830186613bd0565b8281036020840152613e1d8186613bd0565b8381036040850152613e2f8186613bd0565b979650505050505050565b901515815260200190565b60006020825261318e6020830184613ca9565b60009190910b815260200190565b60208082526010908201526f6e6f7420656e6f75676820766f74657360801b604082015260600190565b60208082526019908201527f74686520636f6e7472616374206e6f7420696e69742079657400000000000000604082015260600190565b60208082526032908201527f746865206d6573736167652073656e646572206d757374206265204e6f6d696e604082015271185d1a5bdb959bdd194818dbdb9d1c9858dd60721b606082015260800190565b6020808252601b908201527f536166654d6174683a206164646974696f6e206f766572666c6f770000000000604082015260600190565b6020808252600f908201526e6e6f7420612063616e64696461746560881b604082015260600190565b6020808252601590820152746465706f7369742076616c7565206973207a65726f60581b604082015260600190565b60208082526025908201527f6578636565646564206d6178696d756d206e756d626572206f662076616c696460408201526461746f727360d81b606082015260800190565b60208082526017908201527f766572696669657220646f6573206e6f74206578697374000000000000000000604082015260600190565b60208082526021908201527f536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f6040820152607760f81b606082015260800190565b6020808252602b908201527f76616c696461746f72732063616e6e6f742063616e63656c20776974686f757460408201526a2063616e6469646174657360a81b606082015260800190565b60208082526019908201527f74686520636f6e747261637420616c726561647920696e697400000000000000604082015260600190565b6020808252601690820152756c657373207468616e20332076616c696461746f727360501b604082015260600190565b602080825260139082015272616c726561647920612063616e64696461746560681b604082015260600190565b6020808252602d908201527f746865206d6573736167652073656e646572206d75737420626520746865206260408201526c3637b1b590383937b23ab1b2b960991b606082015260800190565b60208082526029908201527f746865206d6573736167652073656e646572206d75737420626520736c6173686040820152680818dbdb9d1c9858dd60ba1b606082015260800190565b61ffff91909116815260200190565b90815260200190565b6001600160a01b0381168114610e8257600080fd5b8060000b8114610e8257600080fdfef84580f842f84094f9056de9c0c6e8fc3097c3612110641190e0c37b94f9056de9c0c6e8fc3097c3612110641190e0c37b94f9056de9c0c6e8fc3097c3612110641190e0c37b64b10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cfdb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cfab10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf8b10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf6b10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cfcb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cfbb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf7b10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf9a2646970667358221220165266f4c65c184456934d3888f8ebb734682a1cd9625c2cfdc2d6dd12af903164736f6c63430006040033",
			},
		},
	}

	ByzantiumUpgrade[testNet] = &Upgrade{
		UpgradeName: "byzan",
		Configs: []*UpgradeConfig{
			{
				ContractAddr: common.HexToAddress(ValidatorContract),
				CommitUrl:    "https://github.com/missu0008/contracts/commit/e1903b1fc26397917a92f228ab59d36aeb71b281",
				Code:		  "6080604052600436106102255760003560e01c80638452230e11610123578063c3c2559f116100ab578063eb57e2021161006f578063eb57e202146105fb578063ecd35fbb1461061b578063ed76391314610630578063f65974f114610645578063f9a2bbc71461066557610225565b8063c3c2559f1461057c578063c6cea40314610591578063d0083d36146105b1578063e086c7b1146105d1578063e1c7392a146105e657610225565b8063a78abc16116100f2578063a78abc16146104e3578063aa90eb4214610505578063ad3c9da61461051a578063b3adcdcb1461053a578063b7ab4db51461055a57610225565b80638452230e14610468578063862498821461048c578063899347a6146104a1578063a5422d5c146104c157610225565b8063493279b1116101b1578063679705911161017557806367970591146103d35780636969a25c146103e85780637f2737501461041e5780638050aabb1461043357806381014ae31461044857610225565b8063493279b1146103525780634b4feb8814610374578063565c56b3146103895780635e0ca3b4146103a95780635ec737ba146103be57610225565b8063276868c5116101f8578063276868c5146102ae57806335409f7f146102ce57806337b0cf36146102ee57806343756e5c1461031d57806345ef7bfe1461033257610225565b80631a8dea361461022a5780631b6f72a61461023f5780631ff180691461026a578063258718a71461028c575b600080fd5b61023d610238366004613582565b61067a565b005b34801561024b57600080fd5b506102546108f5565b60405161026191906137ce565b60405180910390f35b34801561027657600080fd5b5061027f61090d565b6040516102619190613caf565b34801561029857600080fd5b506102a1610913565b604051610261919061391e565b3480156102ba57600080fd5b5061023d6102c936600461363c565b61091c565b3480156102da57600080fd5b5061023d6102e9366004613567565b6109e6565b3480156102fa57600080fd5b5061030e610309366004613624565b610e05565b60405161026193929190613845565b34801561032957600080fd5b50610254610e3e565b34801561033e57600080fd5b5061023d61034d3660046135f6565b610e44565b34801561035e57600080fd5b50610367610ebf565b6040516102619190613ca0565b34801561038057600080fd5b50610254610ec4565b34801561039557600080fd5b5061027f6103a4366004613567565b610eca565b3480156103b557600080fd5b50610254610f1c565b3480156103ca57600080fd5b50610254610f34565b3480156103df57600080fd5b5061023d610f4c565b3480156103f457600080fd5b50610408610403366004613624565b610ff3565b6040516102619a999897969594939291906137e2565b34801561042a57600080fd5b50610254611075565b34801561043f57600080fd5b5061025461108d565b34801561045457600080fd5b5061023d610463366004613608565b6110a5565b34801561047457600080fd5b5061047d61114b565b604051610261939291906138be565b34801561049857600080fd5b5061027f61161d565b3480156104ad57600080fd5b5061023d6104bc3660046135ac565b611623565b3480156104cd57600080fd5b506104d6611b2b565b604051610261919061390b565b3480156104ef57600080fd5b506104f8611b47565b6040516102619190613900565b34801561051157600080fd5b50610254611b50565b34801561052657600080fd5b5061027f610535366004613567565b611b68565b34801561054657600080fd5b5061023d610555366004613567565b611b7a565b34801561056657600080fd5b5061056f611db4565b6040516102619190613871565b34801561058857600080fd5b50610254611ed6565b34801561059d57600080fd5b5061023d6105ac3660046135f6565b611eee565b3480156105bd57600080fd5b5061027f6105cc366004613567565b611fc2565b3480156105dd57600080fd5b5061027f612021565b3480156105f257600080fd5b5061023d612026565b34801561060757600080fd5b5061023d610616366004613567565b612980565b34801561062757600080fd5b50610254612bd2565b34801561063c57600080fd5b50610254612bea565b34801561065157600080fd5b5061027f610660366004613567565b612c02565b34801561067157600080fd5b50610254612c14565b3341146106a25760405162461bcd60e51b815260040161069990613c0a565b60405180910390fd5b60005460ff166106c45760405162461bcd60e51b815260040161069990613956565b600034116106e45760405162461bcd60e51b815260040161069990613a3f565b6001600160a01b038216600090815260046020526040902054349080156108ad57600060018083038154811061071657fe5b600091825260209091206008909102018054909150600160a01b900460ff161561078057846001600160a01b03167ff177e5d6c5764d79c32883ed824111d9b13f5668cf6ab1cc12dd36791dd955b4846040516107739190613caf565b60405180910390a26108a7565b60028101546001600160401b0316156107ea5760028101546000906107ca906064906107be908790600160401b9004850b850b63ffffffff612c1a16565b9063ffffffff612c5d16565b90506107dc848263ffffffff612c9f16565b93506107e88282612ce1565b505b6003546107fd908463ffffffff612d2d16565b6003556001810154610815908463ffffffff612d2d16565b6001820155600481015461082f908463ffffffff612d2d16565b60048201556005810180546001600160401b0380821687011667ffffffffffffffff1990911617905560068101805460010190556040516001600160a01b038616907f93a090ecc682c002995fad3c85b30c5651d7fd29b0be5da9d784a3302aedc0559061089e908690613caf565b60405180910390a25b506108ef565b836001600160a01b03167ff177e5d6c5764d79c32883ed824111d9b13f5668cf6ab1cc12dd36791dd955b4836040516108e69190613caf565b60405180910390a25b50505050565b739ff4e2d26b4675d91e07bfb04e16db35a4337b4e81565b60035481565b60255460000b81565b60005460ff1661093e5760405162461bcd60e51b815260040161069990613956565b336130001461095f5760405162461bcd60e51b81526004016106999061398d565b6001600160a01b038216600090815260046020526040902054806109955760405162461bcd60e51b815260040161069990613ab3565b60006001808303815481106109a657fe5b9060005260206000209060080201905082156109cb576109c68186612d52565b6109d5565b6109d58186612ddd565b6109df8484612e9a565b5050505050565b3361100114610a075760405162461bcd60e51b815260040161069990613c57565b6001600160a01b03811660009081526004602052604090205480610a2b5750610e02565b600181039050600060018281548110610a4057fe5b60009182526020909120600160089092020181015490549091506000190180610a8f57600060018481548110610a7257fe5b906000526020600020906008020160010181905550505050610e02565b506000805b601f811015610aca57600581601f8110610aaa57fe5b0154600160e01b900460ff1615610ac2576001909101905b600101610a94565b5080610ad857505050610e02565b600060018481548110610ae757fe5b9060005260206000209060080201600101819055506001808481548110610b0a57fe5b6000918252602080832060089092029091018054931515600160a01b0260ff60a01b19909416939093179092556001600160a01b03861681526024909152604090205492508215610cd757600080610b606132d6565b9250905081610b9b576000600560018703601f8110610b7b57fe5b018054911515600160e01b0260ff60e01b19909216919091179055610cbb565b610ba36134dc565b60018281548110610bb057fe5b60009182526020909120600890910201546001600160a01b03168152600160408201819052805483908110610be157fe5b6000918252602091829020600260089092020101546001600160401b0316908201528060056000198801601f8110610c1557fe5b82519101805460208401516040909401511515600160e01b0260ff60e01b196001600160401b03909516600160a01b02600160a01b600160e01b03196001600160a01b039095166001600160a01b0319909316929092179390931617929092161790556001805487916024916000919086908110610c8f57fe5b600091825260208083206008909202909101546001600160a01b03168352820192909252604001902055505b50506001600160a01b0384166000908152602460205260408120555b60255460405163ec1dc14360e01b81526101009091046001600160a01b03169063ec1dc14390610d0b9087906004016137ce565b600060405180830381600087803b158015610d2557600080fd5b505af1158015610d39573d6000803e3d6000fd5b505050506000818381610d4857fe5b04905060008115610dfc5760015460005b81811015610df957602554600090810b810b9084900b12610d7957610df9565b60018181548110610d8657fe5b6000918252602090912060089091020154600160a01b900460ff16610df1578360018281548110610db357fe5b9060005260206000209060080201600101540160018281548110610dd357fe5b90600052602060002090600802016001018190555082806001019350505b600101610d59565b50505b50505050505b50565b600581601f8110610e1257fe5b01546001600160a01b0381169150600160a01b81046001600160401b031690600160e01b900460ff1683565b61100181565b60005460ff16610e665760405162461bcd60e51b815260040161069990613956565b3361300014610e875760405162461bcd60e51b81526004016106999061398d565b60405182906001600160a01b0382169083156108fc029084906000818181858888f193505050501580156108ef573d6000803e3d6000fd5b606081565b61300081565b6001600160a01b03811660009081526004602052604081205480610ef2576000915050610f17565b600180820381548110610f0157fe5b9060005260206000209060080201600101549150505b919050565b7348bf584350605970000aa9ab1eff4f4721ad040f81565b73969fb73d144672a22680a844854df0e1999ea57381565b60005460ff16610f6e5760405162461bcd60e51b815260040161069990613956565b3361300014610f8f5760405162461bcd60e51b81526004016106999061398d565b602660009054906101000a90046001600160a01b03166001600160a01b031663fc4333cd6040518163ffffffff1660e01b8152600401600060405180830381600087803b158015610fdf57600080fd5b505af11580156108ef573d6000803e3d6000fd5b6001818154811061100057fe5b6000918252602082206008919091020180546001820154600283015460038401546004850154600586015460068701546007909701546001600160a01b038088169a50600160a01b90970460ff169895976001600160401b0380871698600160401b90970490970b969495939490921692168a565b73c65380e428f994f436a8838c6af06fd2ba01e2a481565b7337d186ff194f7b9dfb1d7250322d8607a581e0dd81565b60005460ff166110c75760405162461bcd60e51b815260040161069990613956565b33613000146110e85760405162461bcd60e51b81526004016106999061398d565b601f8160000b111561110c5760405162461bcd60e51b815260040161069990613a6e565b60038160000b12156111305760405162461bcd60e51b815260040161069990613bad565b6025805460009290920b60ff1660ff19909216919091179055565b6001546060908190819060008080805b8481101561120b576000602460006001848154811061117657fe5b600091825260208083206008909202909101546001600160a01b031683528201929092526040019020541180156111b55750602554600090810b900b84105b156111c557600190930192611203565b600181815481106111d257fe5b6000918252602090912060089091020154600160a01b900460ff166111fc57600190920191611203565b6001909101905b60010161115b565b5060608360405190808252806020026020018201604052801561124857816020015b6112356134fc565b81526020019060019003908161122d5790505b50905060608360405190808252806020026020018201604052801561128757816020015b6112746134fc565b81526020019060019003908161126c5790505b5090506060836040519080825280602002602001820160405280156112c657816020015b6112b36134fc565b8152602001906001900390816112ab5790505b50600096508695508594509050835b60015481101561160c57600060246000600184815481106112f257fe5b600091825260208083206008909202909101546001600160a01b031683528201929092526040019020541180156113315750602554600090810b900b87105b15611418576001818154811061134357fe5b60009182526020808320604080516101408101825260089490940290910180546001600160a01b038082168652600160a01b90910460ff1615159385019390935260018101549184019190915260028101546001600160401b038082166060860152600160401b909104850b850b90940b6080840152600381015460a0840152600481015460c0840152600581015490931660e08301526006830154610100830152600790920154909116610120820152845185908990811061140257fe5b6020908102919091010152600190960195611604565b6001818154811061142557fe5b6000918252602090912060089091020154600160a01b900460ff16611526576001818154811061145157fe5b60009182526020808320604080516101408101825260089490940290910180546001600160a01b038082168652600160a01b90910460ff1615159385019390935260018101549184019190915260028101546001600160401b038082166060860152600160401b909104850b850b90940b6080840152600381015460a0840152600481015460c0840152600581015490931660e08301526006830154610100830152600790920154909116610120820152835184908890811061151057fe5b6020908102919091010152600190950194611604565b6001818154811061153357fe5b60009182526020808320604080516101408101825260089490940290910180546001600160a01b038082168652600160a01b90910460ff1615159385019390935260018101549184019190915260028101546001600160401b038082166060860152600160401b909104850b850b90940b6080840152600381015460a0840152600481015460c0840152600581015490931660e0830152600683015461010083015260079092015490911661012082015282518390879081106115f257fe5b60209081029190910101526001909401935b6001016112d5565b509198509650945050505050909192565b60025481565b60005460ff166116455760405162461bcd60e51b815260040161069990613956565b33613000146116665760405162461bcd60e51b81526004016106999061398d565b6001600160a01b038316600090815260046020526040902054806118f55761168c6134fc565b6001600160a01b0380861680835260006020808501828152878516610120870190815289840b840b6080880190815260018054808201825581875289516008909102600080516020613d848339815191528101805496511515600160a01b0260ff60a01b19938c166001600160a01b03199889161793909316929092179091556040808b0151600080516020613de483398151915283015560608b0151600080516020613d648339815191528301805495518a0b60ff16600160401b0260ff60401b196001600160401b0393841667ffffffffffffffff19988916171617905560a08c0151600080516020613e0483398151915284015560c08c0151600080516020613d4483398151915284015560e08c0151600080516020613dc483398151915284018054919092169516949094179093556101008a0151600080516020613da48339815191528201559251600080516020613d2483398151915290930180549390981692909316919091179095555492825260049052918220555b602554600090810b900b8110156118ee57600581601f811061182757fe5b0154600160e01b900460ff166118e65761183f6134dc565b6001600160a01b03871681526001604082015280600583601f811061186057fe5b8251910180546020808501516040958601516001600160a01b03199093166001600160a01b0395861617600160a01b600160e01b031916600160a01b6001600160401b03909216919091021760ff60e01b1916600160e01b9215159290920291909117909155908916600090815260249091522060019290920190915550611b26915050565b600101611809565b50506108ef565b600060018083038154811061190657fe5b600091825260209091206008909102018054909150600160a01b900460ff166119415760405162461bcd60e51b815260040161069990613bdd565b805460ff60a01b19168155600281018054600086810b60ff16600160401b0260ff60401b19909216919091179091556007820180546001600160a01b0386166001600160a01b03199091161790555b602554600090810b900b811015611a0257600581601f81106119ae57fe5b0154600160e01b900460ff166119fa576119c66134dc565b6001600160a01b03871681526001604082015260028301546001600160401b0316602082015280600583601f811061186057fe5b600101611990565b50611a0b6133d8565b9150600582601f8110611a1a57fe5b015460028201546001600160401b03600160a01b9092048216911611156109df5760246000600584601f8110611a4c57fe5b01546001600160a01b031681526020810191909152604001600090812055611a726134dc565b6001600160a01b03861681526001604082015260028201546001600160401b0316602082015280600584601f8110611aa657fe5b8251910180546020808501516040958601511515600160e01b0260ff60e01b196001600160401b03909216600160a01b02600160a01b600160e01b03196001600160a01b039788166001600160a01b0319909616959095179490941693909317169190911790915590881660009081526024909152206001840190555050505b505050565b604051806080016040528060478152602001613cdd6047913981565b60005460ff1681565b73ee7f0d15bace58877fbcce21442d7f8c271a162e81565b60046020526000908152604090205481565b60005460ff16611b9c5760405162461bcd60e51b815260040161069990613956565b3361300014611bbd5760405162461bcd60e51b81526004016106999061398d565b6001600160a01b03811660009081526004602052604090205480611bf35760405162461bcd60e51b815260040161069990613a16565b6000600180830381548110611c0457fe5b600091825260208083206008909202909101805460ff60a01b1916600160a01b1781556001600160a01b03861683526024909152604090912054925090508115611b2657600080611c536132d6565b909250905080611c755760405162461bcd60e51b815260040161069990613b2b565b6001600160a01b038516600090815260246020526040812055611c966134dc565b60018381548110611ca357fe5b60009182526020909120600890910201546001600160a01b03168152600160408201819052805484908110611cd457fe5b6000918252602091829020600260089092020101546001600160401b0316908201528060056000198701601f8110611d0857fe5b82519101805460208401516040909401511515600160e01b0260ff60e01b196001600160401b03909516600160a01b02600160a01b600160e01b03196001600160a01b039095166001600160a01b0319909316929092179390931617929092161790556001805486916024916000919087908110611d8257fe5b600091825260208083206008909202909101546001600160a01b03168352820192909252604001902055505050505050565b6060601f6000805b82811015611df157600581601f8110611dd157fe5b0154600160e01b900460ff1615611de9576001909101905b600101611dbc565b50602554600090810b900b8110611e0e5750602554600090810b900b5b606081604051908082528060200260200182016040528015611e3a578160200160208202803683370190505b50600092509050815b83811015611ece57600581601f8110611e5857fe5b0154600160e01b900460ff1615611eb157600581601f8110611e7657fe5b015482516001600160a01b0390911690839085908110611e9257fe5b6001600160a01b03909216602092830291909101909101526001909201915b602554600090810b900b8310611ec657611ece565b600101611e43565b509250505090565b73be419bdf2cee79fcadb3126683d1baa325732b1181565b60005460ff16611f105760405162461bcd60e51b815260040161069990613956565b3361300014611f315760405162461bcd60e51b81526004016106999061398d565b6001600160a01b03821660009081526004602052604090205480611f555750611fbe565b6000600180830381548110611f6657fe5b906000526020600020906008020190506000816001015411611f89575050611fbe565b8281600101541115611fb4576001810154611faa908463ffffffff612c9f16565b60018201556108ef565b6000600182015550505b5050565b6001600160a01b03811660009081526004602052604081205480611ff85760405162461bcd60e51b815260040161069990613ab3565b60018082038154811061200757fe5b906000526020600020906008020160030154915050919050565b601f81565b60005460ff16156120495760405162461bcd60e51b815260040161069990613b76565b6120516134fc565b6120596134dc565b73ee7f0d15bace58877fbcce21442d7f8c271a162e808352600a6080840190815273031f03825b9cf774b6535538b9fb6443d3bb1ebe61012085019081529183526001604080850182905281548083018355600092835286516008909102600080516020613d848339815191528101805460208a01511515600160a01b0260ff60a01b196001600160a01b039586166001600160a01b031993841617161790915592880151600080516020613de48339815191528201556060880151600080516020613d64833981519152820180549651860b60ff16600160401b0260ff60401b196001600160401b0393841667ffffffffffffffff19998a16171617905560a0890151600080516020613e0483398151915283015560c0890151600080516020613d4483398151915283015560e0890151600080516020613dc48339815191528301805491909216961695909517909455610100870151600080516020613da48339815191528501559351600080516020613d2483398151915290930180549390941692169190911790915581906005908251910180546020808501516040958601511515600160e01b0260ff60e01b196001600160401b03928316600160a01b908102600160a01b600160e01b03196001600160a01b03998a166001600160a01b0319988916171617919091169190911790945573969fb73d144672a22680a844854df0e1999ea573808952600a60808a01908152738260ead62d6e6f0d03c6ddc3a800383c8dfa29236101208b0190815291895260018989018190528054808201825560008281528c516008909202600080516020613d8483398151915281018054988f01511515909a0260ff60a01b19938c16988a16989098179290921696909617909755978a0151600080516020613de483398151915287015560608a0151600080516020613d6483398151915287018054925190950b60ff16600160401b0260ff60401b1991851667ffffffffffffffff1993841617919091161790935560a0890151600080516020613e0483398151915286015560c0890151600080516020613d4483398151915286015560e0890151600080516020613dc483398151915286018054919093169316929092179055610100870151600080516020613da483398151915284015551600080516020613d24833981519152909201805492909316911617905581906005908251910180546020808501516040958601511515600160e01b0260ff60e01b196001600160401b03928316600160a01b908102600160a01b600160e01b03196001600160a01b03998a166001600160a01b03199889161716179190911691909117909455739ff4e2d26b4675d91e07bfb04e16db35a4337b4e808952600a60808a0190815273be419bdf2cee79fcadb3126683d1baa325732b116101208b0190815291895260018989018190528054808201825560009182528b516008909102600080516020613d8483398151915281018054978e0151151590990260ff60a01b19928b1697891697909717919091169590951790965596890151600080516020613de48339815191528401556060890151600080516020613d6483398151915284018054985190960b60ff16600160401b0260ff60401b1991841667ffffffffffffffff19998a1617919091161790945560a0880151600080516020613e0483398151915283015560c0880151600080516020613d4483398151915283015560e0880151600080516020613dc48339815191528301805491909216961695909517909455610100860151600080516020613da48339815191528501559051600080516020613d24833981519152909301805493909216921691909117905580600560028251910180546020808501516040958601511515600160e01b0260ff60e01b196001600160401b03928316600160a01b908102600160a01b600160e01b03196001600160a01b03998a166001600160a01b0319988916171617919091169190911790945573c65380e428f994f436a8838c6af06fd2ba01e2a4808952600a60808a019081527337d186ff194f7b9dfb1d7250322d8607a581e0dd6101208b0190815291895260018989018190528054808201825560009182528b516008909102600080516020613d8483398151915281018054978e0151151590990260ff60a01b19928b1697891697909717919091169590951790965596890151600080516020613de48339815191528401556060890151600080516020613d6483398151915284018054985190960b60ff16600160401b0260ff60401b1991841667ffffffffffffffff19998a1617919091161790945560a0880151600080516020613e0483398151915283015560c0880151600080516020613d4483398151915283015560e0880151600080516020613dc48339815191528301805491909216961695909517909455610100860151600080516020613da48339815191528501559051600080516020613d24833981519152909301805493909216921691909117905580600560038251910180546020808501516040909501511515600160e01b0260ff60e01b196001600160401b03909616600160a01b02600160a01b600160e01b03196001600160a01b039096166001600160a01b03199485161795909516949094179490941692909217905560017f8e022d59e1a23c42d2fd14308a35bb09ff7eb851ecaa097f85f764cc47f1221081905560027ff7c616c390a886443fb3a4f6e29abe8d5efc8b575383aa0649c70248f358db3681905560037f6082481aa7895966eb0787bb131b519d6733c6004754edfa1d0ced422a7def2881905560047f0dc56416fa452ffb5dac79a4f882a29985f6f82cbf235e336190129dbf8d0e0881905560249095527f6f54c9c60a1fd1c665ce123c11bfb8639b31f45b5e58c4dae1f13c15a05efe908390557f8df836634a5ed3d5c84118e0e1bf68a8fbe0753bd84a27004bdf9481b6b027d2919091557f49a1a0f45b0f36b82d71315c8cad19cd01345188d3233ed1dcf0f2892559db265573c65380e428f994f436a8838c6af06fd2ba01e2a460009081527f7caa204581207a69469c1e9c868d90c188aba6e0cb3e0027ffc9318d5342e1ba8490556025805462300000610100600160a81b031960ff19928316909717969096169590951790556026805490931661100117909255815490921690911790555050565b33611001146129a15760405162461bcd60e51b815260040161069990613c57565b6001600160a01b038116600090815260046020526040902054806129c55750610e02565b6001810390506000600182815481106129da57fe5b90600052602060002090600802016001015490506000600183815481106129fd57fe5b600091825260209091206001600890920201810191909155546000190180612a2757505050610e02565b506000805b601f811015612a6257600581601f8110612a4257fe5b0154600160e01b900460ff1615612a5a576001909101905b600101612a2c565b5080612a7057505050610e02565b6000818381612a7b57fe5b04905060008115610dfc5760005b85811015612b2957602554600090810b810b9083900b12612aa957612b29565b60018181548110612ab657fe5b6000918252602090912060089091020154600160a01b900460ff16612b21578260018281548110612ae357fe5b9060005260206000209060080201600101540160018281548110612b0357fe5b90600052602060002090600802016001018190555081806001019250505b600101612a89565b50600180549086015b81811015610df957602554600090810b810b9084900b12612b5257610df9565b60018181548110612b5f57fe5b6000918252602090912060089091020154600160a01b900460ff16612bca578360018281548110612b8c57fe5b9060005260206000209060080201600101540160018281548110612bac57fe5b90600052602060002090600802016001018190555082806001019350505b600101612b32565b738260ead62d6e6f0d03c6ddc3a800383c8dfa292381565b73031f03825b9cf774b6535538b9fb6443d3bb1ebe81565b60246020526000908152604090205481565b61100081565b600082612c2957506000612c57565b82820282848281612c3657fe5b0414612c545760405162461bcd60e51b815260040161069990613aea565b90505b92915050565b6000612c5483836040518060400160405280601a81526020017f536166654d6174683a206469766973696f6e206279207a65726f000000000000815250613479565b6000612c5483836040518060400160405280601e81526020017f536166654d6174683a207375627472616374696f6e206f766572666c6f7700008152506134b0565b60028201546001600160401b0316612cff5760006003830155611fbe565b6002820154612d1e9082906001600160401b031663ffffffff612c5d16565b60038301805490910190555050565b600082820183811015612c545760405162461bcd60e51b8152600401610699906139df565b6002820180546001600160401b0380821684011667ffffffffffffffff1990911617905581546001600160a01b03166000908152602460205260409020548015611b265781600560018303601f8110612da757fe5b0180546001600160401b03600160a01b808304821690940116909202600160a01b600160e01b0319909216919091179055505050565b60028201546001600160401b0380831691161015612e0d5760405162461bcd60e51b81526004016106999061392c565b6002820180546001600160401b038082168490031667ffffffffffffffff1990911617905581546001600160a01b03166000908152602460205260409020548015611b265781600560018303601f8110612e6357fe5b0180546001600160401b03600160a01b80830482169490940316909202600160a01b600160e01b0319909216919091179055505050565b6001600160a01b03821660009081526004602052604090205480612ed05760405162461bcd60e51b815260040161069990613ab3565b6000600180830381548110612ee157fe5b90600052602060002090600802019050821561313c576001600160a01b03841660009081526024602052604090205415612f1c575050611fbe565b60005b602554600090810b900b81101561301757600581601f8110612f3d57fe5b0154600160e01b900460ff1661300f57612f556134dc565b6001600160a01b03861681526001604082015260028301546001600160401b0316602082015280600583601f8110612f8957fe5b8251910180546020808501516040958601516001600160a01b03199093166001600160a01b0395861617600160a01b600160e01b031916600160a01b6001600160401b03909216919091021760ff60e01b1916600160e01b9215159290920291909117909155908816600090815260249091522060019290920190915550611fbe915050565b600101612f1f565b506130206133d8565b9150600582601f811061302f57fe5b015460028201546001600160401b03600160a01b9092048216911611156131375760246000600584601f811061306157fe5b01546001600160a01b0316815260208101919091526040016000908120556130876134dc565b6001600160a01b03851681526001604082015260028201546001600160401b0316602082015280600584601f81106130bb57fe5b8251910180546020808501516040958601516001600160a01b03199093166001600160a01b0395861617600160a01b600160e01b031916600160a01b6001600160401b03909216919091021760ff60e01b1916600160e01b92151592909202919091179091559087166000908152602490915220600184019055505b6108ef565b6001600160a01b038416600090815260246020526040902054613160575050611fbe565b6001600160a01b03841660009081526024602052604081205492506131836132d6565b945090508380156131c457506001818154811061319c57fe5b600091825260209091206002600890920201810154908301546001600160401b039182169116105b156109df576001600160a01b0385166000908152602460205260408120556131ea6134dc565b600182815481106131f757fe5b60009182526020909120600890910201546001600160a01b0316815260016040820181905280548390811061322857fe5b6000918252602091829020600260089092020101546001600160401b0316908201528060056000198601601f811061325c57fe5b82519101805460208401516040909401511515600160e01b0260ff60e01b196001600160401b03909516600160a01b02600160a01b600160e01b03196001600160a01b039095166001600160a01b0319909316929092179390931617929092161790556001805485916024916000919086908110611d8257fe5b600080808080805b6001548110156133cc57600181815481106132f557fe5b60009182526020909120600260089092020101546001600160401b031683118015906133595750602460006001838154811061332d57fe5b600091825260208083206008909202909101546001600160a01b03168352820192909252604001902054155b801561338a57506001818154811061336d57fe5b6000918252602090912060089091020154600160a01b900460ff16155b156133c4576001818154811061339c57fe5b60009182526020909120600260089092020101549093506001600160401b0316915060019050825b6001016132de565b50919350909150509091565b6005546000908190600160a01b90046001600160401b031660015b601f81101561347157600581601f811061340957fe5b0154600160a01b90046001600160401b03168211801561343e5750600581601f811061343157fe5b0154600160e01b900460ff165b1561346957600581601f811061345057fe5b0154909250600160a01b90046001600160401b03169050815b6001016133f3565b509091505090565b6000818361349a5760405162461bcd60e51b8152600401610699919061390b565b5060008385816134a657fe5b0495945050505050565b600081848411156134d45760405162461bcd60e51b8152600401610699919061390b565b505050900390565b604080516060810182526000808252602082018190529181019190915290565b6040805161014081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e08101829052610100810182905261012081019190915290565b80356001600160a01b0381168114612c5757600080fd5b600060208284031215613578578081fd5b612c548383613550565b60008060408385031215613594578081fd5b61359e8484613550565b946020939093013593505050565b6000806000606084860312156135c0578081fd5b83356135cb81613cb8565b925060208401356135db81613ccd565b915060408401356135eb81613cb8565b809150509250925092565b60008060408385031215613594578182fd5b600060208284031215613619578081fd5b8135612c5481613ccd565b600060208284031215613635578081fd5b5035919050565b600080600060608486031215613650578283fd5b83356001600160401b0381168114613666578384fd5b92506136758560208601613550565b9150604084013580151581146135eb578182fd5b6001600160a01b03169052565b6000815180845260208085019450808401835b8381101561375e5781516136be888251613689565b838101516136ce858a0182613769565b50604081810151908901526060808201516136eb828b01826137c1565b50506080808201516136ff828b01826137ba565b505060a0818101519089015260c0808201519089015260e080820151613727828b01826137c1565b5050610100818101519089015261012080820151613747828b0182613689565b5050506101409690960195908201906001016136a9565b509495945050505050565b15159052565b60008151808452815b8181101561379457602081850181015186830182015201613778565b818111156137a55782602083870101525b50601f01601f19169290920160200192915050565b60000b9052565b6001600160401b03169052565b6001600160a01b0391909116815260200190565b6001600160a01b039a8b16815298151560208a015260408901979097526001600160401b03958616606089015260009490940b608088015260a087019290925260c086015290911660e08401526101008301529091166101208201526101400190565b6001600160a01b039390931683526001600160401b039190911660208301521515604082015260600190565b6020808252825182820181905260009190848201906040850190845b818110156138b25783516001600160a01b03168352928401929184019160010161388d565b50909695505050505050565b6000606082526138d16060830186613696565b82810360208401526138e38186613696565b83810360408501526138f58186613696565b979650505050505050565b901515815260200190565b600060208252612c54602083018461376f565b60009190910b815260200190565b60208082526010908201526f6e6f7420656e6f75676820766f74657360801b604082015260600190565b60208082526019908201527f74686520636f6e7472616374206e6f7420696e69742079657400000000000000604082015260600190565b60208082526032908201527f746865206d6573736167652073656e646572206d757374206265204e6f6d696e604082015271185d1a5bdb959bdd194818dbdb9d1c9858dd60721b606082015260800190565b6020808252601b908201527f536166654d6174683a206164646974696f6e206f766572666c6f770000000000604082015260600190565b6020808252600f908201526e6e6f7420612063616e64696461746560881b604082015260600190565b6020808252601590820152746465706f7369742076616c7565206973207a65726f60581b604082015260600190565b60208082526025908201527f6578636565646564206d6178696d756d206e756d626572206f662076616c696460408201526461746f727360d81b606082015260800190565b60208082526017908201527f766572696669657220646f6573206e6f74206578697374000000000000000000604082015260600190565b60208082526021908201527f536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f6040820152607760f81b606082015260800190565b6020808252602b908201527f76616c696461746f72732063616e6e6f742063616e63656c20776974686f757460408201526a2063616e6469646174657360a81b606082015260800190565b60208082526019908201527f74686520636f6e747261637420616c726561647920696e697400000000000000604082015260600190565b6020808252601690820152756c657373207468616e20332076616c696461746f727360501b604082015260600190565b602080825260139082015272616c726561647920612063616e64696461746560681b604082015260600190565b6020808252602d908201527f746865206d6573736167652073656e646572206d75737420626520746865206260408201526c3637b1b590383937b23ab1b2b960991b606082015260800190565b60208082526029908201527f746865206d6573736167652073656e646572206d75737420626520736c6173686040820152680818dbdb9d1c9858dd60ba1b606082015260800190565b61ffff91909116815260200190565b90815260200190565b6001600160a01b0381168114610e0257600080fd5b8060000b8114610e0257600080fdfef84580f842f84094f9056de9c0c6e8fc3097c3612110641190e0c37b94f9056de9c0c6e8fc3097c3612110641190e0c37b94f9056de9c0c6e8fc3097c3612110641190e0c37b64b10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cfdb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cfab10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf8b10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf6b10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cfcb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cfbb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf7b10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf9a264697066735822122045f86c1d00d296e4bc880ff0a3b9d358625aa85304d833a69ccf8073b5ad4f8c64736f6c63430006040033",
			},
		},
	}

	rewardUpgrade[mainNet] = &Upgrade{
		UpgradeName: "reward",
		Configs: []*UpgradeConfig{
			{
				ContractAddr: common.HexToAddress(NominationVote),
				CommitUrl:    "https://github.com/binance-chain/bsc-genesis-contract/commit",
				Code:         "60806040526004361061036b5760003560e01c806381014ae3116101c6578063c6616894116100f7578063e1c7392a11610095578063ecd35fbb1161006f578063ecd35fbb146108f5578063ed7639131461090a578063f2fde38b1461091f578063f9a2bbc71461093f5761036b565b8063e1c7392a146108a0578063e22c6128146108b5578063ec1dc143146108d55761036b565b8063d9e570ab116100d1578063d9e570ab14610833578063dc1e30da14610848578063e086c7b114610876578063e0e77ea11461088b5761036b565b8063c6616894146107e9578063cd192d3c146107fe578063cf2b39211461081e5761036b565b8063ad3c9da611610164578063b358a14d1161013e578063b358a14d1461079f578063b4eb5ede14610516578063bb54343b146107b4578063c3c2559f146107d45761036b565b8063ad3c9da614610730578063b2de4cdd14610750578063b33aa7c3146107705761036b565b8063a5422d5c116101a0578063a5422d5c146106c2578063a78abc16146106e4578063aa90eb4214610706578063aa95cddb1461071b5761036b565b806381014ae31461066d5780638da5cb5b1461068d578063a1220e9b146106a25761036b565b80634b4feb88116102a0578063684d65081161023e578063715018a611610218578063715018a6146106005780637cdad1ab146106155780637f273750146106435780638050aabb146106585761036b565b8063684d65081461059c5780636969a25c146105b15780636c7edc26146105e05761036b565b8063579a76fb1161027a578063579a76fb146105485780635e0ca3b41461055d5780635ec737ba1461057257806367970591146105875761036b565b80634b4feb881461051657806351d977a61461052b578063531a4981146105405761036b565b80631df9b0301161030d5780633f26b964116102e75780633f26b964146104aa57806343756e5c146104bf5780634711f586146104d4578063493279b1146104f45761036b565b80631df9b0301461046057806335473def146104755780633d3ef5091461048a5761036b565b80631663c708116103495780631663c708146103c55780631959a002146103fb5780631b6f72a6146104295780631ca92a2d1461044b5761036b565b80630b94bb7c14610370578063100fe55d1461038557806312a0a5a4146103a5575b600080fd5b61038361037e366004613fde565b610954565b005b34801561039157600080fd5b506103836103a0366004613fff565b610da2565b3480156103b157600080fd5b506103836103c0366004613efc565b6113ea565b3480156103d157600080fd5b506103e56103e0366004613e4b565b611a1b565b6040516103f2919061497e565b60405180910390f35b34801561040757600080fd5b5061041b610416366004613e4b565b611a2d565b6040516103f2929190614987565b34801561043557600080fd5b5061043e611a46565b6040516103f29190614094565b34801561045757600080fd5b50610383611a5e565b34801561046c57600080fd5b50610383611da3565b34801561048157600080fd5b506103e5611fcb565b34801561049657600080fd5b506103836104a5366004613e67565b611fd2565b3480156104b657600080fd5b506103836120c1565b3480156104cb57600080fd5b5061043e6121c3565b3480156104e057600080fd5b506103e56104ef366004613e4b565b6121c9565b34801561050057600080fd5b506105096121db565b6040516103f2919061496f565b34801561052257600080fd5b5061043e6121e0565b34801561053757600080fd5b5061043e6121e6565b6103e56121fe565b34801561055457600080fd5b506103e56122aa565b34801561056957600080fd5b5061043e6122b0565b34801561057e57600080fd5b5061043e6122c8565b34801561059357600080fd5b506103836122e0565b3480156105a857600080fd5b5061043e6123a5565b3480156105bd57600080fd5b506105d16105cc366004613fff565b6123bd565b6040516103f2939291906140e7565b3480156105ec57600080fd5b506103836105fb366004613e4b565b6123ff565b34801561060c57600080fd5b5061038361244f565b34801561062157600080fd5b50610635610630366004613e92565b61249a565b6040516103f29291906149d7565b34801561064f57600080fd5b5061043e6124ca565b34801561066457600080fd5b5061043e6124e2565b34801561067957600080fd5b50610383610688366004613fbe565b6124fa565b34801561069957600080fd5b5061043e6125c0565b3480156106ae57600080fd5b506103836106bd366004613fff565b6125d4565b3480156106ce57600080fd5b506106d7612766565b6040516103f2919061419d565b3480156106f057600080fd5b506106f9612782565b6040516103f29190614192565b34801561071257600080fd5b5061043e61278b565b34801561072757600080fd5b506103e56127a3565b34801561073c57600080fd5b506103e561074b366004613e4b565b6127b1565b34801561075c57600080fd5b506103e561076b366004613eca565b6127c3565b34801561077c57600080fd5b5061079061078b366004613e4b565b61294c565b6040516103f293929190614995565b3480156107ab57600080fd5b5061043e61296d565b3480156107c057600080fd5b506103836107cf366004613efc565b612985565b3480156107e057600080fd5b5061043e612e58565b3480156107f557600080fd5b506103e5612e70565b34801561080a57600080fd5b5061041b610819366004613e4b565b612e7c565b34801561082a57600080fd5b506103e5612fa1565b34801561083f57600080fd5b5061043e612fa7565b34801561085457600080fd5b50610868610863366004613e4b565b612fbf565b6040516103f292919061410a565b34801561088257600080fd5b506103e561320b565b34801561089757600080fd5b5061043e613210565b3480156108ac57600080fd5b50610383613228565b3480156108c157600080fd5b506103e56108d0366004613e4b565b61366c565b3480156108e157600080fd5b506103836108f0366004613e4b565b6138f2565b34801561090157600080fd5b5061043e613a6f565b34801561091657600080fd5b5061043e613a87565b34801561092b57600080fd5b5061038361093a366004613e4b565b612420565b34801561094b57600080fd5b5061043e613a9f565b60005460ff1661097f5760405162461bcd60e51b8152600401610976906142cd565b60405180910390fd5b69152d02c7e14af68000003410156109a95760405162461bcd60e51b8152600401610976906144d7565b60008260000b121580156109c1575060648260000b13155b6109dd5760405162461bcd60e51b815260040161097690614909565b6001600160a01b038116610a035760405162461bcd60e51b815260040161097690614304565b336001600160a01b0382161415610a2c5760405162461bcd60e51b8152600401610976906145d6565b3360009081526003602052604090206001015415610a5c5760405162461bcd60e51b815260040161097690614410565b600a546040516344c9a3d360e11b81526001600160a01b039091169063899347a690610a90903390869086906004016140a8565b600060405180830381600087803b158015610aaa57600080fd5b505af1158015610abe573d6000803e3d6000fd5b5050336000908152600260205260408120349055600454600193509091508083015b81831015610cc357336001600160a01b031660048481548110610aff57fe5b60009182526020909120600290910201546001600160a01b03161415610ba157600060048481548110610b2e57fe5b906000526020600020906002020160000160146101000a81548160ff021916908315150217905550600093508460048481548110610b6857fe5b906000526020600020906002020160010160006101000a8154816001600160a01b0302191690836001600160a01b031602179055508290505b846001600160a01b031660048481548110610bb857fe5b60009182526020909120600160029092020101546001600160a01b0316148015610be25750828114155b15610bff5760405162461bcd60e51b815260040161097690614938565b846001600160a01b031660048481548110610c1657fe5b60009182526020909120600290910201546001600160a01b0316148015610c3d5750828114155b15610c5a5760405162461bcd60e51b8152600401610976906148ac565b336001600160a01b031660048481548110610c7157fe5b60009182526020909120600160029092020101546001600160a01b0316148015610c9b5750828114155b15610cb85760405162461bcd60e51b81526004016109769061422a565b600190920191610ae0565b8315610d8457610cd1613d9a565b3381526000602082018181526001600160a01b0388811660408501908152600480546001810182559452935160029093027f8a35acfbc15ff81a39ae7d344fd709f28e8600b4aa8c65c6b64bfe7fe36bd19b8101805493511515600160a01b0260ff60a01b199584166001600160a01b031995861617959095169490941790935592517f8a35acfbc15ff81a39ae7d344fd709f28e8600b4aa8c65c6b64bfe7fe36bd19c90920180549290931691161790555b600154610d97903463ffffffff613aa516565b600155505050505050565b60005460ff16610dc45760405162461bcd60e51b8152600401610976906142cd565b6000610dcf3361366c565b905081811015610df15760405162461bcd60e51b8152600401610976906143ad565b6000806000610dff33613ad3565b9092509050801561100757600a5460405163565c56b360e01b81526001600160a01b039091169063565c56b390610e3a908590600401614094565b60206040518083038186803b158015610e5257600080fd5b505afa158015610e66573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e8a9190614017565b9250821561100757848310610fa257600a5460405163c6cea40360e01b81526001600160a01b039091169063c6cea40390610ecb90859089906004016140ce565b600060405180830381600087803b158015610ee557600080fd5b505af1158015610ef9573d6000803e3d6000fd5b5050600a546040516322f7bdff60e11b81526001600160a01b0390911692506345ef7bfe9150610f2f90339089906004016140ce565b600060405180830381600087803b158015610f4957600080fd5b505af1158015610f5d573d6000803e3d6000fd5b505033600090815260076020526040902060010154610f85925090508663ffffffff613aa516565b33600090815260076020526040902060010155506113e792505050565b600a5460405163c6cea40360e01b81526001600160a01b039091169063c6cea40390610fd490859087906004016140ce565b600060405180830381600087803b158015610fee57600080fd5b505af1158015611002573d6000803e3d6000fd5b505050505b60045460005b8181101561134457336000908152600660205260408120600480548391908590811061103557fe5b600091825260208083206002909202909101546001600160a01b031683528201929092526040019020546001600160401b0316111561133c57600a54600480546000926001600160a01b03169163d0083d36918590811061109257fe5b60009182526020909120600290910201546040516001600160e01b031960e084901b1681526110cd916001600160a01b031690600401614094565b60206040518083038186803b1580156110e557600080fd5b505afa1580156110f9573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061111d9190614017565b3360009081526006602052604081206004805493945091926111e29284918790811061114557fe5b600091825260208083206002909202909101546001600160a01b031683528281019390935260409182018120600101543382526006909352908120600480546111d69388939290918a90811061119757fe5b600091825260208083206002909202909101546001600160a01b031683528201929092526040019020546001600160401b03169063ffffffff613ba116565b9063ffffffff613bdb16565b9050866111f5818363ffffffff613aa516565b97508988106112c55761120e8a8263ffffffff613bdb16565b3360009081526006602052604081206004805493955061126f93869391908990811061123657fe5b600091825260208083206002909202909101546001600160a01b031683528201929092526040019020600101549063ffffffff613aa516565b336000908152600660205260408120600480549192918890811061128f57fe5b600091825260208083206002909202909101546001600160a01b0316835282019290925260400190206001015550611344915050565b336000908152600660205260408120600480546112eb9386939290918990811061123657fe5b336000908152600660205260408120600480549192918890811061130b57fe5b600091825260208083206002909202909101546001600160a01b031683528201929092526040019020600101555050505b60010161100d565b5033600090815260076020526040902060010154611368908763ffffffff613aa516565b336000818152600760205260409081902060010192909255600a5491516322f7bdff60e11b81526001600160a01b03909216916345ef7bfe916113af918a906004016140ce565b600060405180830381600087803b1580156113c957600080fd5b505af11580156113dd573d6000803e3d6000fd5b5050505050505050505b50565b60005460ff1661140c5760405162461bcd60e51b8152600401610976906142cd565b8051825114801561141e575060008251115b61143a5760405162461bcd60e51b8152600401610976906141be565b815160005b81811015611a1557600084828151811061145557fe5b60200260200101516001600160401b0316116114835760405162461bcd60e51b81526004016109769061482b565b83818151811061148f57fe5b60200260200101516001600160401b031660066000336001600160a01b03166001600160a01b0316815260200190815260200160002060008584815181106114d357fe5b6020908102919091018101516001600160a01b03168252810191909152604001600020546001600160401b0316101561151e5760405162461bcd60e51b815260040161097690614493565b600a5483516000916001600160a01b03169063d0083d369086908590811061154257fe5b60200260200101516040518263ffffffff1660e01b81526004016115669190614094565b60206040518083038186803b15801561157e57600080fd5b505afa158015611592573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906115b69190614017565b9050600061168c60066000336001600160a01b03166001600160a01b0316815260200190815260200160002060008786815181106115f057fe5b60200260200101516001600160a01b03166001600160a01b03168152602001908152602001600020600101546111d68460066000336001600160a01b03166001600160a01b0316815260200190815260200160002060008a898151811061165357fe5b6020908102919091018101516001600160a01b03168252810191909152604001600020546001600160401b03169063ffffffff613ba116565b600a546040516322f7bdff60e11b81529192506001600160a01b0316906345ef7bfe906116bf90339085906004016140ce565b600060405180830381600087803b1580156116d957600080fd5b505af11580156116ed573d6000803e3d6000fd5b505033600090815260076020526040902060010154611715925090508263ffffffff613aa516565b33600090815260076020526040902060010155855186908490811061173657fe5b602002602001015160066000336001600160a01b03166001600160a01b03168152602001908152602001600020600087868151811061177157fe5b6020908102919091018101516001600160a01b031682528181019290925260409081016000908120805467ffffffffffffffff1981166001600160401b0391821696909603169490941790935533835260069091528120865182908890879081106117d857fe5b6020908102919091018101516001600160a01b03168252810191909152604001600020546001600160401b031611156118bb573360009081526006602052604081208651611867929088908790811061182d57fe5b6020908102919091018101516001600160a01b031682528101919091526040016000205483906001600160401b031663ffffffff613ba116565b336000908152600660205260408120875190919088908790811061188757fe5b60200260200101516001600160a01b03166001600160a01b031681526020019081526020016000206001018190555061190a565b336000908152600660205260408120865182908890879081106118da57fe5b60200260200101516001600160a01b03166001600160a01b03168152602001908152602001600020600101819055505b611963611944670de0b6b3a764000088868151811061192557fe5b60200260200101516001600160401b0316613ba190919063ffffffff16565b336000908152600760205260409020600301549063ffffffff613bdb16565b33600090815260076020526040902060030155600a5486516001600160a01b039091169063276868c59088908690811061199957fe5b60200260200101518786815181106119ad57fe5b602002602001015160006040518463ffffffff1660e01b81526004016119d5939291906149ab565b600060405180830381600087803b1580156119ef57600080fd5b505af1158015611a03573d6000803e3d6000fd5b50506001909401935061143f92505050565b50505050565b60026020526000908152604090205481565b6003602052600090815260409020805460019091015482565b73f588a47781041644ae6d9a657a6eee712f7936d681565b60005460ff16611a805760405162461bcd60e51b8152600401610976906142cd565b60004281805b33600090815260076020526040902060020154811015611aea57336000908152600760205260409020600201805482908110611abe57fe5b9060005260206000209060020201600101546213c680840310611ae2576001909101905b600101611a86565b5060008111611b0b5760405162461bcd60e51b81526004016109769061450e565b60005b3360009081526007602052604090206002015460001901811015611cd65760005b3360009081526007602052604090206002015482900360001901811015611ccd57336000908152600760205260409020600201805460018301908110611b7157fe5b60009182526020808320600292830201600101543384526007909152604090922001805483908110611b9f57fe5b9060005260206000209060020201600101541015611cc557611bbf613dba565b336000908152600760205260409020600201805483908110611bdd57fe5b60009182526020808320604080518082018252600294850290920180548352600190810154838501523386526007909352909320909101805492935091908401908110611c2657fe5b906000526020600020906002020160076000336001600160a01b03166001600160a01b031681526020019081526020016000206002018381548110611c6757fe5b60009182526020808320845460029384029091019081556001948501549085015533835260079052604090912001805483928501908110611ca457fe5b60009182526020918290208351600290920201908155910151600190910155505b600101611b2f565b50600101611b0e565b5060005b81811015611d75573360009081526007602052604090206002018054600019810191611d289183908110611d0a57fe5b6000918252602090912060029091020154869063ffffffff613aa516565b33600090815260076020526040902060020180549196509080611d4757fe5b6000828152602081206002600019909301928302018181556001908101919091559155919091019050611cda565b50604051339084156108fc029085906000818181858888f19350505050158015611a15573d6000803e3d6000fd5b60005460ff16611dc55760405162461bcd60e51b8152600401610976906142cd565b60045460009081905b80821015611edb57336001600160a01b031660048381548110611ded57fe5b60009182526020909120600290910201546001600160a01b03161480611e445750336001600160a01b031660048381548110611e2557fe5b60009182526020909120600160029092020101546001600160a01b0316145b15611ed0576001925060048281548110611e5a57fe5b6000918252602090912060029091020154600160a01b900460ff1615611e925760405162461bcd60e51b8152600401610976906146f6565b600160048381548110611ea157fe5b600091825260209091206002909102018054911515600160a01b0260ff60a01b19909216919091179055611edb565b600190910190611dce565b82611ef85760405162461bcd60e51b815260040161097690614384565b600a54600480546001600160a01b039092169163b3adcdcb919085908110611f1c57fe5b60009182526020909120600290910201546040516001600160e01b031960e084901b168152611f57916001600160a01b031690600401614094565b600060405180830381600087803b158015611f7157600080fd5b505af1158015611f85573d6000803e3d6000fd5b505033600090815260026020526040902054159150611fc6905057336000908152600260209081526040808320546003909252909120908155426001909101555b505050565b6213c68081565b60005460ff16611ff45760405162461bcd60e51b8152600401610976906142cd565b611ffc613c1d565b6001600160a01b031661200d6125c0565b6001600160a01b0316146120335760405162461bcd60e51b81526004016109769061475c565b6001600160a01b03821660009081526008602052604090205461205c908263ffffffff613bdb16565b6001600160a01b038316600090815260086020526040902055600954612088908263ffffffff613bdb16565b6009556040516001600160a01b0383169082156108fc029083906000818181858888f19350505050158015611fc6573d6000803e3d6000fd5b60005460ff166120e35760405162461bcd60e51b8152600401610976906142cd565b3360009081526003602052604090206001015442906121145760405162461bcd60e51b81526004016109769061472d565b336000908152600360205260409020600101546213c6809082031161214b5760405162461bcd60e51b81526004016109769061465d565b3360008181526003602052604080822054905181156108fc0292818181858888f19350505050158015612182573d6000803e3d6000fd5b50336000908152600360205260409020546001546121a59163ffffffff613bdb16565b60019081553360009081526003602052604081208181559091015550565b61100181565b60086020526000908152604090205481565b606081565b61300081565b73d9145cce52d386f254917e481eb44e9943f3913881565b6000805460ff166122215760405162461bcd60e51b8152600401610976906142cd565b600034116122415760405162461bcd60e51b8152600401610976906143e4565b333461224c81613c21565b6001600160a01b038216600090815260076020526040902054612275908263ffffffff613aa516565b6001600160a01b0383166000908152600760205260409020556001546122a1908263ffffffff613aa516565b60015591505090565b60015481565b7374ca05e2b40fd15c1819583ea63d87c91a1747c681565b73bda7f006fe37a791acb4c0a543581e470934498a81565b60005460ff166123025760405162461bcd60e51b8152600401610976906142cd565b61230a613c1d565b6001600160a01b031661231b6125c0565b6001600160a01b0316146123415760405162461bcd60e51b81526004016109769061475c565b600a60009054906101000a90046001600160a01b03166001600160a01b031663679705916040518163ffffffff1660e01b8152600401600060405180830381600087803b15801561239157600080fd5b505af1158015611a15573d6000803e3d6000fd5b73d4f607aef8cb84a2bfab05f185d3941d55f73bfc81565b600481815481106123ca57fe5b6000918252602090912060029091020180546001909101546001600160a01b038083169350600160a01b90920460ff16911683565b33613000146124205760405162461bcd60e51b81526004016109769061460d565b6001600160a01b0381166124465760405162461bcd60e51b815260040161097690614287565b6113e781613c49565b612457613c1d565b6001600160a01b03166124686125c0565b6001600160a01b03161461248e5760405162461bcd60e51b81526004016109769061475c565b6124986000613c49565b565b6006602090815260009283526040808420909152908252902080546001909101546001600160401b039091169082565b732719a48598c7bb082a1b485f5e9582b9315ec39781565b7359d38a9aab6ca9dd2b43fbef45fc29ee8d1c90c381565b60005460ff1661251c5760405162461bcd60e51b8152600401610976906142cd565b612524613c1d565b6001600160a01b03166125356125c0565b6001600160a01b03161461255b5760405162461bcd60e51b81526004016109769061475c565b600a546040516381014ae360e01b81526001600160a01b03909116906381014ae39061258b9084906004016141b0565b600060405180830381600087803b1580156125a557600080fd5b505af11580156125b9573d6000803e3d6000fd5b5050505050565b60005461010090046001600160a01b031690565b60005460ff166125f65760405162461bcd60e51b8152600401610976906142cd565b600081116126165760405162461bcd60e51b815260040161097690614573565b61261f81613c21565b336000908152600760205260409020548061264c5760405162461bcd60e51b8152600401610976906146c6565b33600090815260076020526040902060030154829061267290839063ffffffff613bdb16565b10156126905760405162461bcd60e51b815260040161097690614791565b814710156126b05760405162461bcd60e51b815260040161097690614875565b336000908152600760205260409020546126d0908363ffffffff613bdb16565b33600090815260076020526040902090815560020154600a10156127065760405162461bcd60e51b81526004016109769061453e565b61270e613dba565b8281524260208083019182523360009081526007825260408120600290810180546001818101835591845293909220855193909102019182559151908201555461275e908463ffffffff613bdb16565b600155505050565b604051806080016040528060478152602001614a606047913981565b60005460ff1681565b731197ce55f1199c4b5abab079ebba7715b7d4ad3f81565b69152d02c7e14af680000081565b60056020526000908152604090205481565b8051600090806127e55760405162461bcd60e51b8152600401610976906141e7565b6000805b8281101561294457600a5485516000916001600160a01b03169063d0083d369088908590811061281557fe5b60200260200101516040518263ffffffff1660e01b81526004016128399190614094565b60206040518083038186803b15801561285157600080fd5b505afa158015612865573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906128899190614017565b9050600061292660066000336001600160a01b03166001600160a01b0316815260200190815260200160002060008986815181106128c357fe5b60200260200101516001600160a01b03166001600160a01b03168152602001908152602001600020600101546111d68460066000336001600160a01b03166001600160a01b0316815260200190815260200160002060008c898151811061165357fe5b9050612938848263ffffffff613aa516565b935050506001016127e9565b509392505050565b60076020526000908152604090208054600182015460039092015490919083565b7396fa4c7de0dc1f89ad70b71773f3d56be0b91b7781565b60005460ff166129a75760405162461bcd60e51b8152600401610976906142cd565b805182511480156129b9575060008251115b6129d55760405162461bcd60e51b8152600401610976906141be565b815160005b81811015611a155760008482815181106129f057fe5b60200260200101516001600160401b031611612a1e5760405162461bcd60e51b81526004016109769061482b565b6000612a2933613ca2565b3360009081526007602052604081205491925090612a4d908363ffffffff613bdb16565b90506000612a79612a6c670de0b6b3a764000089878151811061192557fe5b839063ffffffff613bdb16565b1015612a975760405162461bcd60e51b8152600401610976906145aa565b612ad1612ab2670de0b6b3a764000088868151811061192557fe5b336000908152600760205260409020600301549063ffffffff613aa516565b33600090815260076020526040812060030191909155600a5486516001600160a01b039091169063d0083d3690889087908110612b0a57fe5b60200260200101516040518263ffffffff1660e01b8152600401612b2e9190614094565b60206040518083038186803b158015612b4657600080fd5b505afa158015612b5a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612b7e9190614017565b336000908152600660205260408120885192935091889087908110612b9f57fe5b6020908102919091018101516001600160a01b03168252810191909152604001600020546001600160401b0316612c5357612bff878581518110612bdf57fe5b60200260200101516001600160401b031682613ba190919063ffffffff16565b3360009081526006602052604081208851909190899088908110612c1f57fe5b60200260200101516001600160a01b03166001600160a01b0316815260200190815260200160002060010181905550612d2f565b612cdf612c85888681518110612c6557fe5b60200260200101516001600160401b031683613ba190919063ffffffff16565b33600090815260066020526040812089519091908a9089908110612ca557fe5b60200260200101516001600160a01b03166001600160a01b0316815260200190815260200160002060010154613aa590919063ffffffff16565b3360009081526006602052604081208851909190899088908110612cff57fe5b60200260200101516001600160a01b03166001600160a01b03168152602001908152602001600020600101819055505b868481518110612d3b57fe5b602002602001015160066000336001600160a01b03166001600160a01b031681526020019081526020016000206000888781518110612d7657fe5b6020908102919091018101516001600160a01b03908116835290820192909252604001600020805467ffffffffffffffff1981166001600160401b03918216949094011692909217909155600a54885191169063276868c590899087908110612ddb57fe5b6020026020010151888781518110612def57fe5b602002602001015160016040518463ffffffff1660e01b8152600401612e17939291906149ab565b600060405180830381600087803b158015612e3157600080fd5b505af1158015612e45573d6000803e3d6000fd5b5050600190950194506129da9350505050565b73e10f99bbd766b496343504f46d09c48c7616c9f681565b670de0b6b3a764000081565b6001600160a01b0381166000908152600760205260408120600201548190818042815b84811015612f93576001600160a01b038816600090815260076020526040902060020180546213c680919083908110612ed457fe5b906000526020600020906002020160010154830310612f3e576001600160a01b03881660009081526007602052604090206002018054612f37919083908110612f1957fe5b6000918252602090912060029091020154859063ffffffff613aa516565b9350612f8b565b6001600160a01b03881660009081526007602052604090206002018054612f88919083908110612f6a57fe5b6000918252602090912060029091020154849063ffffffff613aa516565b92505b600101612e9f565b50919450925050505b915091565b60095481565b736c67c4b4f082343516372b096899fb48dd4dab7981565b60045460609081906000805b82811015613044576001600160a01b03861660009081526006602052604081206004805483919085908110612ffc57fe5b600091825260208083206002909202909101546001600160a01b031683528201929092526040019020546001600160401b0316111561303c576001909101905b600101612fcb565b50606081604051908082528060200260200182016040528015613071578160200160208202803683370190505b5090506060826040519080825280602002602001820160405280156130a0578160200160208202803683370190505b5090506000805b858110156131fd576001600160a01b038916600090815260066020526040812060048054839190859081106130d857fe5b600091825260208083206002909202909101546001600160a01b031683528201929092526040019020546001600160401b031611156131f5576001600160a01b0389166000908152600660205260408120600480549192918490811061313a57fe5b600091825260208083206002909202909101546001600160a01b0316835282019290925260400190205484516001600160401b039091169085908490811061317e57fe5b60200260200101906001600160401b031690816001600160401b031681525050600481815481106131ab57fe5b600091825260209091206002909102015483516001600160a01b03909116908490849081106131d657fe5b6001600160a01b03909216602092830291909101909101526001909101905b6001016130a7565b509195509350505050915091565b602981565b735b1711c6b6e1fee92ea478230cff05b9d6363e1681565b60005460ff161561324b5760405162461bcd60e51b8152600401610976906147c8565b613253613d9a565b731197ce55f1199c4b5abab079ebba7715b7d4ad3f81527309d70836d8daf81a1d9ea14a7fddf97c1f872f346040820190815260048054600181810183556000838152855160029384027f8a35acfbc15ff81a39ae7d344fd709f28e8600b4aa8c65c6b64bfe7fe36bd19b81810180546020808c0180511515600160a01b90810260ff60a01b196001600160a01b03998a166001600160a01b0319968716178116919091179095558c517f8a35acfbc15ff81a39ae7d344fd709f28e8600b4aa8c65c6b64bfe7fe36bd19c9788018054918a1691861691909117905573bda7f006fe37a791acb4c0a543581e470934498a8e527344931bd462c806876c7339ea0809d1ab7f0397e28d528b54808b018d558c8a528e51908c028088018054855115158502938c16908816178816929092179091558d519088018054918a1691861691909117905573f588a47781041644ae6d9a657a6eee712f7936d68e5273e10f99bbd766b496343504f46d09c48c7616c9f68d528b54808b018d558c8a528e51908c028088018054855115158502938c16908816178816929092179091558d519088018054918a16918616919091179055732719a48598c7bb082a1b485f5e9582b9315ec3978e527359d38a9aab6ca9dd2b43fbef45fc29ee8d1c90c38d528b54808b018d558c8a528e51908c028088018054855115158502938c16908816178816929092179091558d519088018054918a16918616919091179055736c67c4b4f082343516372b096899fb48dd4dab798e52735b1711c6b6e1fee92ea478230cff05b9d6363e168d528b54808b018d558c8a528e51908c028088018054855115158502938c16908816178816929092179091558d519088018054918a1691861691909117905573d4f607aef8cb84a2bfab05f185d3941d55f73bfc808f527396fa4c7de0dc1f89ad70b71773f3d56be0b91b778e528c54808c018e558d8b528f51908d02978801805494511515909302908a1693861693909317909516919091179055995192909301805492909416918316919091179092556005968790527f24b7337e7b97592dafdcf667fab30c54be52be5b9c013e9ddf00af62dcc129e6939093557f3d1165d1c450560303b671c124ad97d972fc1055239d9cb6b55ee79ca42984129390935560037f1a5480af7694a5a437d233ea8f056d101b4fb2745d6deac5d2f4b87d31e697a2557fc016fcfcf32c75cce16d4cc42d270970f03aea329d8c9333c2cec508faa51545939093557f63ba0c8c3f777c79b3dbaaec3e44e7d9cba85637158ab5dc2d22fa85afcc198693909355905260067f8a4b6bf8ad70c83d9e17ef0e3259ff4dec41bec04c4ec9c673a414d7cf26e2e455600a805490911661100017905561365c7374ca05e2b40fd15c1819583ea63d87c91a1747c6612420565b506000805460ff19166001179055565b6004546000908190815b8181101561383e576001600160a01b038516600090815260066020526040812060048054839190859081106136a757fe5b600091825260208083206002909202909101546001600160a01b031683528201929092526040019020546001600160401b0316111561383657600a54600480546000926001600160a01b03169163d0083d36918590811061370457fe5b60009182526020909120600290910201546040516001600160e01b031960e084901b16815261373f916001600160a01b031690600401614094565b60206040518083038186803b15801561375757600080fd5b505afa15801561376b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061378f9190614017565b9050600061381f60066000896001600160a01b03166001600160a01b031681526020019081526020016000206000600486815481106137ca57fe5b600091825260208083206002909202909101546001600160a01b039081168452838201949094526040928301822060010154938c16825260069052908120600480546111d69388939290918a90811061119757fe5b9050613831858263ffffffff613aa516565b945050505b600101613676565b5060008061384b86613ad3565b909250905080156138e857600a5460405163565c56b360e01b81526138e5916001600160a01b03169063565c56b390613888908690600401614094565b60206040518083038186803b1580156138a057600080fd5b505afa1580156138b4573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906138d89190614017565b859063ffffffff613aa516565b93505b5091949350505050565b60005460ff166139145760405162461bcd60e51b8152600401610976906142cd565b33611000146139355760405162461bcd60e51b81526004016109769061460d565b60045460005b81811015611fc657826001600160a01b03166004828154811061395a57fe5b60009182526020909120600290910201546001600160a01b03161415613a675760016004828154811061398957fe5b6000918252602080832060029092029091018054931515600160a01b0260ff60a01b19909416939093179092556001600160a01b038516815260039091526040902060010154156139f4576001600160a01b0383166000908152600360205260408120818155600101555b6001600160a01b038316600090815260026020908152604080832054600890925290912054613a289163ffffffff613aa516565b6001600160a01b038416600090815260086020908152604080832093909355600290522054600954613a5f9163ffffffff613aa516565b600955611fc6565b60010161393b565b7344931bd462c806876c7339ea0809d1ab7f0397e281565b7309d70836d8daf81a1d9ea14a7fddf97c1f872f3481565b61100081565b600082820183811015613aca5760405162461bcd60e51b81526004016109769061434d565b90505b92915050565b6004546000908190815b81811015613b9557846001600160a01b031660048281548110613afc57fe5b60009182526020909120600290910201546001600160a01b03161480613b535750846001600160a01b031660048281548110613b3457fe5b60009182526020909120600160029092020101546001600160a01b0316145b15613b8d5760048181548110613b6557fe5b60009182526020909120600290910201546001600160a01b0316935060019250612f9c915050565b600101613add565b50929360009350915050565b600082613bb057506000613acd565b82820282848281613bbd57fe5b0414613aca5760405162461bcd60e51b815260040161097690614685565b6000613aca83836040518060400160405280601e81526020017f536166654d6174683a207375627472616374696f6e206f766572666c6f770000815250613d6e565b3390565b670de0b6b3a76400008106156113e75760405162461bcd60e51b8152600401610976906147ff565b600080546001600160a01b03838116610100818102610100600160a81b0319851617855560405193049190911692909183917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e091a35050565b60045460009081805b82811015613d4d57613cbb613d9a565b60048281548110613cc857fe5b600091825260208083206040805160608101825260029490940290910180546001600160a01b038082168652600160a01b90910460ff161515858501526001909101548116848301528a81168552600683528185208451909116855290915290912054909150613d429084906001600160401b0316613aa5565b925050600101613cab565b50613d6681670de0b6b3a764000063ffffffff613ba116565b949350505050565b60008184841115613d925760405162461bcd60e51b8152600401610976919061419d565b505050900390565b604080516060810182526000808252602082018190529181019190915290565b604051806040016040528060008152602001600081525090565b600082601f830112613de4578081fd5b8135613df7613df282614a16565b6149f0565b818152915060208083019084810181840286018201871015613e1857600080fd5b60005b84811015613e40578135613e2e81614a35565b84529282019290820190600101613e1b565b505050505092915050565b600060208284031215613e5c578081fd5b8135613aca81614a35565b60008060408385031215613e79578081fd5b8235613e8481614a35565b946020939093013593505050565b60008060408385031215613ea4578182fd5b8235613eaf81614a35565b91506020830135613ebf81614a35565b809150509250929050565b600060208284031215613edb578081fd5b81356001600160401b03811115613ef0578182fd5b613d6684828501613dd4565b60008060408385031215613f0e578182fd5b82356001600160401b0380821115613f24578384fd5b81850186601f820112613f35578485fd5b80359250613f45613df284614a16565b80848252602080830192508084018a828389028701011115613f65578889fd5b8894505b86851015613f90578035613f7c81614a4a565b845260019490940193928101928101613f69565b509096508701359350505080821115613fa7578283fd5b50613fb485828601613dd4565b9150509250929050565b600060208284031215613fcf578081fd5b813580820b8114613aca578182fd5b60008060408385031215613ff0578182fd5b823580830b8114613eaf578283fd5b600060208284031215614010578081fd5b5035919050565b600060208284031215614028578081fd5b5051919050565b6001600160a01b03169052565b60008151808452815b8181101561406157602081850181015186830182015201614045565b818111156140725782602083870101525b50601f01601f19169290920160200192915050565b6001600160401b03169052565b6001600160a01b0391909116815260200190565b6001600160a01b03938416815260009290920b6020830152909116604082015260600190565b6001600160a01b03929092168252602082015260400190565b6001600160a01b0393841681529115156020830152909116604082015260600190565b604080825283519082018190526000906020906060840190828701845b8281101561414a5761413a848351614087565b9284019290840190600101614127565b50505083810382850152845180825285830191830190845b818110156141855761417583855161402f565b9284019291840191600101614162565b5090979650505050505050565b901515815260200190565b600060208252613aca602083018461403c565b60009190910b815260200190565b6020808252600f908201526e3830b930b6b2ba32b91032b93937b960891b604082015260600190565b60208082526023908201527f6172726179206c656e677468206d7573742062652067726561746572207468616040820152626e203160e81b606082015260800190565b6020808252603c908201527f7468652063616e64696461746520697320756e6971756520616e642063616e6e60408201527f6f74206265207468652073616d65206173206665654164647265737300000000606082015260800190565b60208082526026908201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160408201526564647265737360d01b606082015260800190565b60208082526019908201527f74686520636f6e7472616374206e6f7420696e69742079657400000000000000604082015260600190565b60208082526029908201527f666565416464726573733a206e6577206f776e657220697320746865207a65726040820152686f206164647265737360b81b606082015260800190565b6020808252601b908201527f536166654d6174683a206164646974696f6e206f766572666c6f770000000000604082015260600190565b6020808252600f908201526e6e6f7420612063616e64696461746560881b604082015260600190565b60208082526017908201527f696e73756666696369656e742072657761726420475354000000000000000000604082015260600190565b602080825260129082015271706c6561736520696e7075742076616c756560701b604082015260600190565b6020808252605d908201527fe58f96e6b688e68890e4b8bae9aa8ce8af81e4babae69c89e58d81e4ba94e5a460408201527fa9e79a84e586bbe7bb93e69c9fefbc8ce8afb7e9a286e58f96e4b88ae6aca1e860608201527fb4a8e68abce79a84e4bba3e5b881e5868de9878de696b0e7ab9ee98089000000608082015260a00190565b60208082526024908201527f696e73756666696369656e74206e756d626572206f66207265766f6b656420766040820152636f74657360e01b606082015260800190565b6020808252601d908201527f696e7375666669626369656e74206d6f72746761676520746f6b656e73000000604082015260600190565b6020808252601690820152756e6f2067737420746f6b656e7320746f20636c61696d60501b604082015260600190565b6020808252818101527fe69c80e5a4a7e8a7a3e586bbe6aca1e695b0e4b88de5be97e8b685e8bf873130604082015260600190565b6020808252601d908201527f616d6f756e74206d7573742062652067726561746572207468616e2030000000604082015260600190565b602080825260129082015271696e73756666696369656e7420766f74657360701b604082015260600190565b60208082526017908201527f63616e277420757365206d696e65722061646472657373000000000000000000604082015260600190565b60208082526030908201527f746865206d6573736167652073656e646572206d7573742062652076616c696460408201526f185d1bdc94d95d0818dbdb9d1c9858dd60821b606082015260800190565b6020808252600e908201526d6e6f74207965742074696d65212160901b604082015260600190565b60208082526021908201527f536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f6040820152607760f81b606082015260800190565b6020808252601690820152751d1bdad95b9cc81b9bdd081e595d081c1b195919d95960521b604082015260600190565b60208082526019908201527f6e6f7420612063616e6469646174652076616c696461746f7200000000000000604082015260600190565b6020808252601590820152741c1b195919d948191bd95cc81b9bdd08195e1a5cdd605a1b604082015260600190565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b60208082526018908201527f736f6d65204753542068617665206265656e20766f7465640000000000000000604082015260600190565b60208082526019908201527f74686520636f6e747261637420616c726561647920696e697400000000000000604082015260600190565b60208082526012908201527136bab9ba1031329030b71034b73a32b3b2b960711b604082015260600190565b6020808252602a908201527f746865206e756d626572206f6620766f746573206d75737420626520677265616040820152690746572207468616e20360b41b606082015260800190565b6020808252601d908201527f696e73756666696369656e7420636f6e74726163742062616c616e6365000000604082015260600190565b6020808252603d908201527f6665654164647265737320697320756e6971756520616e64206d757374206e6f60408201527f74206265207468652073616d65206173206f74686572206d696e657273000000606082015260800190565b60208082526015908201527406d757374206265206265747765656e20302d31303605c1b604082015260600190565b60208082526019908201527f6665654164647265737320616c72656164792065786973747300000000000000604082015260600190565b61ffff91909116815260200190565b90815260200190565b918252602082015260400190565b9283526020830191909152604082015260600190565b6001600160401b039390931683526001600160a01b039190911660208301521515604082015260600190565b6001600160401b03929092168252602082015260400190565b6040518181016001600160401b0381118282101715614a0e57600080fd5b604052919050565b60006001600160401b03821115614a2b578081fd5b5060209081020190565b6001600160a01b03811681146113e757600080fd5b6001600160401b03811681146113e757600080fdfef84580f842f84094f9056de9c0c6e8fc3097c3612110641190e0c37b94f9056de9c0c6e8fc3097c3612110641190e0c37b94f9056de9c0c6e8fc3097c3612110641190e0c37b64a26469706673582212200d6cce8c929f6d7126713cdc21bddf10d5c17c0724bde51a6f07ef9771d683d064736f6c63430006040033",
			},
		},
	}
}

func UpgradeBuildInSystemContract(config *params.ChainConfig, blockNumber *big.Int, statedb *state.StateDB) {
	if config == nil || blockNumber == nil || statedb == nil {
		return
	}
	var network string
	switch GenesisHash {
	/* Add mainnet genesis hash */
	case params.GSTGenesisHash:
		network = mainNet
	case params.ChapelGenesisHash:
		network = chapelNet
	case params.RialtoGenesisHash:
		network = rialtoNet
	case params.GSTTestGenesisHash:
		network = testNet
	default:
		network = defaultNet
	}
	//fmt.Println("打印ByzantiumBlock:",config.ByzantiumBlock)
	//fmt.Println("打印config:",config)
	logger := log.New("system-contract-upgrade", network)
	//if config.IsOnRamanujan(blockNumber) {
	//	applySystemContractUpgrade(ramanujanUpgrade[network], blockNumber, statedb, logger)
	//}
	//
	//if config.IsOnNiels(blockNumber) {
	//	applySystemContractUpgrade(nielsUpgrade[network], blockNumber, statedb, logger)
	//}
	//
	//if config.IsOnMirrorSync(blockNumber) {
	//	applySystemContractUpgrade(mirrorUpgrade[network], blockNumber, statedb, logger)
	//}
	//
	//if config.IsOnBruno(blockNumber) {
	//	applySystemContractUpgrade(brunoUpgrade[network], blockNumber, statedb, logger)
	//}

	//
	//升级合约
	if config.IsOnBruno(blockNumber) {
		fmt.Println("开始升级合约，当前区块高度",blockNumber)
		fmt.Println("当前网络",network)
		applySystemContractUpgrade(ByzantiumUpgrade[network],blockNumber, statedb, logger)
	}

	//升级合约 2022-06-04
	if config.IsOnReward(blockNumber){
		fmt.Println("开始升级合约，当前区块高度",blockNumber)
		fmt.Println("当前网络",network)
		applySystemContractUpgrade(rewardUpgrade[network],blockNumber,statedb,logger)
	}
}

func applySystemContractUpgrade(upgrade *Upgrade, blockNumber *big.Int, statedb *state.StateDB, logger log.Logger) {
	if upgrade == nil {
		logger.Info("Empty upgrade config", "height", blockNumber.String())
		return
	}

	logger.Info(fmt.Sprintf("Apply upgrade %s at height %d", upgrade.UpgradeName, blockNumber.Int64()))
	for _, cfg := range upgrade.Configs {
		logger.Info(fmt.Sprintf("Upgrade contract %s to commit %s", cfg.ContractAddr.String(), cfg.CommitUrl))

		if cfg.BeforeUpgrade != nil {
			err := cfg.BeforeUpgrade(blockNumber, cfg.ContractAddr, statedb)
			if err != nil {
				panic(fmt.Errorf("contract address: %s, execute beforeUpgrade error: %s", cfg.ContractAddr.String(), err.Error()))
			}
		}

		newContractCode, err := hex.DecodeString(cfg.Code)
		if err != nil {
			panic(fmt.Errorf("failed to decode new contract code: %s", err.Error()))
		}
		statedb.SetCode(cfg.ContractAddr, newContractCode)

		if cfg.AfterUpgrade != nil {
			err := cfg.AfterUpgrade(blockNumber, cfg.ContractAddr, statedb)
			if err != nil {
				panic(fmt.Errorf("contract address: %s, execute afterUpgrade error: %s", cfg.ContractAddr.String(), err.Error()))
			}
		}
	}
	fmt.Println("合约升级完毕,当前区块高度",blockNumber)
}
